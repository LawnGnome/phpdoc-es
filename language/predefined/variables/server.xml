<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: n/a Maintainer: lboshell Status: ready -->

<refentry xml:id="reserved.variables.server" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" role="noversion">
 <refnamediv>
  <refname>$_SERVER</refname>
  <refname>$HTTP_SERVER_VARS [obsoleta]</refname>
  <refpurpose>Información del servidor y el entorno de ejecución</refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <para>
   <varname>$_SERVER</varname> es una matriz que contiene información tal
   como cabeceras, rutas y ubicaciones de scripts. Las entradas de esta
   matriz son creadas por el servidor web. No existen garantías de que todo
   servidor vaya a proveer alguno de estos valores; puede que los servidores
   omitan algunos, o provean otros que no se listan aquí. Hecha esta
   aclaración, un gran número de estas variables hacen parte de la <link
   xlink:href="&url.cgispec;">especificación CGI 1.1</link>, así que puede
   esperar que sean definidas por el servidor.
  </para>

  <simpara>
   <varname>$HTTP_SERVER_VARS</varname> contiene la misma información
   inicial, pero no es una <link
   linkend="language.variables.superglobals">superglobal</link>. (Note que
   <varname>$HTTP_SERVER_VARS</varname> y <varname>$_SERVER</varname> son
   variables diferentes y que PHP las trata como tal)
  </simpara>

  <simpara>
   Pueden encontrarse o no cualquiera de los siguientes elementos en
   <varname>$_SERVER</varname>. Note que algunos pocos de éstos, si es que
   al menos uno de ellos, estarán disponibles (o tendrán algún significado
   real) si se ejecuta PHP en la <link linkend="features.commandline">línea
   de comandos</link>.
  </simpara>

  <para>
   <variablelist>
    <varlistentry>
     <term>'<varname>PHP_SELF</varname>'</term>
     <listitem>
      <simpara>
       El nombre de archivo del script ejecutándose actualmente, relativo a
       la raíz de documentos. Por ejemplo,
       <varname>$_SERVER['PHP_SELF']</varname> en un script en la dirección
       <filename>http://example.com/test.php/foo.bar</filename> sería
       <filename>/test.php/foo.bar</filename>. La constante <link
       linkend="language.constants.predefined">__FILE__</link> contiene la
       ruta completa y nombre del archivo actual (o en otras palabras,
       incluído).
      </simpara>
      <simpara>
       Si PHP está siendo ejecutado como un procesador de línea de comandos,
       esta variable contiene el nombre del script a partir de PHP 4.3.0.
       Anteriormente no estaba disponible.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<link linkend="reserved.variables.argv">$argv</link>'</term>
     <listitem>
      <simpara>
       Matriz de argumentos pasados al script. Cuando el script es ejecutado
       en la línea de comandos, ésta entrega acesso al estilo C a los
       parámetros de la línea de comandos. Cuando es llamado mediante el
       método GET, ésta contendrá la cadena de consulta (query).
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<link linkend="reserved.variables.argc">$argc</link>'</term>
     <listitem>
      <simpara>
       Contiene el número de parámetros de línea de comandos pasados al
       script (si se ejecuta en la línea de comandos).
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>GATEWAY_INTERFACE</varname>'</term>
     <listitem>
      <simpara>
       Qué revisión de la especificación CGI está usando el servidor; es
       decir '<literal>CGI/1.1</literal>'.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>SERVER_ADDR</varname>'</term>
     <listitem>
      <simpara>
       La dirección IP del servidor bajo la cual está siendo ejecutado el
       script actual.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>SERVER_NAME</varname>'</term>
     <listitem>
      <simpara>
       El nombre del servidor anfitrión bajo el que está siendo ejecutado el
       script actual. Si el script está corriendo en un host virtual, éste
       será el valor definido para ese host virtual.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>SERVER_SOFTWARE</varname>'</term>
     <listitem>
      <simpara>
       Cadena de identificación del servidor, dada en las cabeceras cuando
       se responde a peticiones.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>SERVER_PROTOCOL</varname>'</term>
     <listitem>
      <simpara>
       Nombre y revisión del protocolo de información mediante el cual fue
       solicitada la página; es decir, '<literal>HTTP/1.0</literal>';
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>REQUEST_METHOD</varname>'</term>
     <listitem>
      <simpara>
       Cuál método de petición fue usado para acceder a la página; es decir,
       '<literal>GET</literal>', '<literal>HEAD</literal>',
       '<literal>POST</literal>', '<literal>PUT</literal>'.
      </simpara>
      <note>
       <para>
        El script PHP es finalizado luego de enviar las cabeceras (es decir,
        después de producir cualquier salida sin uso de búferes de salida)
        si el método de petición fue <literal>HEAD</literal>.
       </para>
      </note>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>REQUEST_TIME</varname>'</term>
     <listitem>
      <simpara>
       La marca de tiempo del inicio de la petición. Disponible desde PHP
       5.1.0.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>QUERY_STRING</varname>'</term>
     <listitem>
      <simpara>
       La cadena de consulta, si existe, mediante la cual se accedió a la
       página.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>DOCUMENT_ROOT</varname>'</term>
     <listitem>
      <simpara>
       El directorio raíz de documentos bajo el que está siendo ejecutado el
       script actual, tal y como se define en el archivo de configuración
       del servidor.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>HTTP_ACCEPT</varname>'</term>
     <listitem>
      <simpara>
       Contenidos de la cabecera <literal>Accept:</literal> de la petición
       actual, si existe.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>HTTP_ACCEPT_CHARSET</varname>'</term>
     <listitem>
      <simpara>
       Contenidos de la cabecera <literal>Accept-Charset:</literal> de la
       petición actual, si existe. Ejemplo:
       '<literal>iso-8859-1,*,utf-8</literal>'.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>HTTP_ACCEPT_ENCODING</varname>'</term>
     <listitem>
      <simpara>
       Contenidos de la cabecera <literal>Accept-Encoding:</literal> de la
       petición actual, si existe. Ejemplo: '<literal>gzip</literal>'.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>HTTP_ACCEPT_LANGUAGE</varname>'</term>
     <listitem>
      <simpara>
       Contenidos de la cabecera <literal>Accept-Language:</literal> de la
       petición actual, si existe. Ejemplo: '<literal>en</literal>'.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>HTTP_CONNECTION</varname>'</term>
     <listitem>
      <simpara>
       Contenidos de la cabecera <literal>Connection:</literal> de la
       petición actual, si existe. Ejemplo: '<literal>Keep-Alive</literal>'.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>HTTP_HOST</varname>'</term>
     <listitem>
      <simpara>
       Contenidos de la cabecera <literal>Host:</literal> de la petición
       actual, si existe.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>HTTP_REFERER</varname>'</term>
     <listitem>
      <simpara>
       La dirección de la página (si la hay) la cual refirió al agente de
       usuario a la página actual. Este valor es definido por el agente de
       usuario. No todos los agentes de usuario lo definen, y algunos
       proveen la capacidad de modificar <varname>HTTP_REFERER</varname>
       como una característica del software. En resumen, no se puede confiar
       realmente en este valor.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>HTTP_USER_AGENT</varname>'</term>
     <listitem>
      <simpara>
       Contenidos de la cabecera <literal>User-Agent:</literal> de la
       petición actual, si existe. Esta es una cadena que denota el agente
       de usuario que está accediendo a la página. Un ejemplo típico es:
       <computeroutput>Mozilla/4.5 [en] (X11; U; Linux 2.2.9
       i586)</computeroutput>. Entre otras cosas, puede usar este valor con
       <function>get_browser</function> para personalizar la salida de su
       página a las capacidades del agente de usuario.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>HTTPS</varname>'</term>
     <listitem>
      <simpara>
       Definido con un valor no-vacío si el script fue solicitado a través
       del protocolo HTTPS.
      </simpara>
      <simpara>
       Note que cuando se usa ISAPI con IIS, el valor será
       <literal>off</literal> si la petición no fue hecha a través del
       protocolo HTTPS.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>REMOTE_ADDR</varname>'</term>
     <listitem>
      <simpara>
       La dirección IP desde donde el usuario está observado la página
       actual.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>REMOTE_HOST</varname>'</term>
     <listitem>
      <simpara>
       El nombre Host desde donde el usuario está viendo la página actual.
       La consulta dns de vuelta está basada en el valor
       <varname>REMOTE_ADDR</varname> del usuario.
      </simpara>
      <note>
       <simpara>
        Su servidor web debe estar configurado para crear esta variable.
        Por ejemplo, en Apache necesitará <literal>HostnameLookups
        On</literal> dentro de &httpd.conf; para que exista. Vea también
        <function>gethostbyaddr</function>.
       </simpara>
      </note>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>REMOTE_PORT</varname>'</term>
     <listitem>
      <simpara>
       El puerto que está siendo usado en la máquina del usuario para
       comunicarse con el servidor web.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>SCRIPT_FILENAME</varname>'</term>
     <listitem>
      <para>
       La ruta absoluta del nombre del script siendo ejecutado actualmente.
       <note>
        <para>
         Si un script es ejecutado en el entorno CLI usando una ruta
         relativa, tal como <filename>archivo.php</filename> o
         <filename>../archivo.php</filename>,
         <varname>$_SERVER['SCRIPT_FILENAME']</varname> contendrá la ruta
         relativa especificada por el usuario.
        </para>
       </note>
      </para>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>SERVER_ADMIN</varname>'</term>
     <listitem>
      <simpara>
       El valor dado a la directiva SERVER_ADMIN (para Apache) en el archivo
       de configuración del servidor web. Si el script está siendo ejecutado
       en un host virtual, éste será el valor definido para ese host
       virtual.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>SERVER_PORT</varname>'</term>
     <listitem>
      <simpara>
       El puerto en el equipo servidor que está siendo usado por el servidor
       web para comunicación. En configuraciones predeterminadas, ese valor
       será '<literal>80</literal>'; usando SSL, por ejemplo, este valor
       cambiará a cualquiera que sea el puerto que esté definido para HTTP
       seguro.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>SERVER_SIGNATURE</varname>'</term>
     <listitem>
      <simpara>
       Cadena que contiene la versión del servidor y el nombre de host
       virtual que es agregado a las páginas generadas por el servidor, si
       está habilitada esta funcionalidad.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>PATH_TRANSLATED</varname>'</term>
     <listitem>
      <simpara>
       Ruta sobre el sistema de archivos (no la raíz de documentos) al
       script actual, luego de que el servidor haya realizado cualquier
       asignación al vuelo virtual-a-real.
      </simpara>
      <note>
       <simpara>
        A partir de PHP 4.3.2, <envar>PATH_TRANSLATED</envar> ya no se
        define implícitamente bajo la <acronym>SAPI</acronym> de Apache 2, a
        diferencia de lo que ocurre en Apache 1, en donde se define con el
        mismo valor de la variable de servidor
        <envar>SCRIPT_FILENAME</envar> cuando Apache no se encarga de
        definirlo. Este cambio fue realizado para cumplir con la
        especificación <acronym>CGI</acronym> de que
        <envar>PATH_TRANSLATED</envar> debe existir únicamente si
        <envar>PATH_INFO</envar> se define.
       </simpara>
       <simpara>
        Los usuarios de Apache 2 pueden usar <literal>AcceptPathInfo =
        On</literal> al interior de <filename>httpd.conf</filename> para
        definir <envar>PATH_INFO</envar>.
       </simpara>
      </note>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>SCRIPT_NAME</varname>'</term>
     <listitem>
      <simpara>
       Contiene la ruta del script actual. Ésta es útil para páginas que
       necesitan apuntar a ellas mismas. La constante <link
       linkend="language.constants.predefined">__FILE__</link> contiene la
       ruta completa y nombre del archivo actual (es decir, incluido).
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>REQUEST_URI</varname>'</term>
     <listitem>
      <simpara>
       El URI que fue dado para acceder a esta página; por ejemplo,
       '<literal>/index.html</literal>'.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>PHP_AUTH_DIGEST</varname>'</term>
     <listitem>
      <simpara>
       Cuando se está corriendo bajo Apache como módulo, realizando
       autenticación HTTP Digest, esta variable recibe el valor de la
       cabecera 'Authorization' enviada por el cliente (la cual debería ser
       usada para efectuar la validación apropiada).
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>PHP_AUTH_USER</varname>'</term>
     <listitem>
      <simpara>
       Cuando se corre sobre Apache o IIS (ISAPI en PHP 5) como módulo
       realizando autenticación HTTP, esta variable es definida con el
       nombre de usuario definido por el cliente.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>PHP_AUTH_PW</varname>'</term>
     <listitem>
      <simpara>
       Cuando se corre sobre Apache o IIS (ISAPI en PHP 5) como módulo
       realizando autenticación HTTP, esta variable es definida con la
       contraseña entregada por el usuario.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term>'<varname>AUTH_TYPE</varname>'</term>
     <listitem>
      <simpara>
       Cuando se corre sobre Apache como módulo realizando autenticación
       HTTP, esta variable es definida con el tipo de autenticación.
      </simpara>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>

 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <para>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>&Version;</entry>
       <entry>&Description;</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>4.1.0</entry>
       <entry>
        Se introdujo <varname>$_SERVER</varname>, haciendo obsoleta a
        <varname>$HTTP_SERVER_VARS</varname>.
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </para>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example xml:id="variable.server.basic">
    <title>Ejemplo de <varname>$_SERVER</varname></title>
    <programlisting role="php">
<![CDATA[
<?php
echo $_SERVER['SERVER_NAME'];
?>
]]>
    </programlisting>
    &example.outputs.similar;
    <screen>
<![CDATA[
www.example.com
]]>
    </screen>
   </example>
  </para>
 </refsect1>

 <refsect1 role="notes">
  &reftitle.notes;
  &note.is-superglobal;
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><link linkend="book.filter">La extensión filter</link></member>
   </simplelist>
  </para>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

