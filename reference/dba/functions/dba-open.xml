<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: n/a Maintainer: lboshell Status: ready -->
<refentry xml:id="function.dba-open" xmlns="http://docbook.org/ns/docbook">
 <refnamediv>
  <refname>dba_open</refname>
  <refpurpose>Abrir una base de datos</refpurpose>
 </refnamediv>
 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>resource</type><methodname>dba_open</methodname>
   <methodparam><type>string</type><parameter>ruta</parameter></methodparam>
   <methodparam><type>string</type><parameter>modo</parameter></methodparam>
   <methodparam choice="opt"><type>string</type><parameter>gestor</parameter></methodparam>
   <methodparam choice="opt"><type>mixed</type><parameter>...</parameter></methodparam>
  </methodsynopsis>
  <para>
   <function>dba_open</function> establece una instancia de base de datos
   para el archivo en <parameter>ruta</parameter> con el
   <parameter>modo</parameter> dado usando <parameter>gestor</parameter>.
  </para>
 </refsect1>
 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>ruta</parameter></term>
     <listitem>
      <para>
       Usualmente una ruta normal en su sistema de archivos.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>modo</parameter></term>
     <listitem>
      <para>
       Es <literal>r</literal> para acceso de lectura, <literal>w</literal>
       para acceso de lectura/escritura a una base de datos existente,
       <literal>c</literal> para acceso de lectura/escritura y creación de
       base de datos si no existe actualmente, y <literal>n</literal> para
       crear, truncar y tener acceso de lectura/escritura.
      </para>
      <para>
       Adicionalmente es posible definir el método de bloqueo de la base de
       datos con el siguiente caracter. Use <literal>l</literal> para
       bloquear la base de datos con un archivo <filename>.lck</filename> o
       <literal>d</literal> para bloquear el archivo de base de datos mismo.
       Es importante que todas sus aplicaciones hagan esto de forma
       consistente.
      </para>
      <para>
       Si desea probar el acceso y no desea esperar al bloqueo puede añadir
       <literal>t</literal> como el tercer caracter. Cuando esté
       absulatemente seguro de que no necesita bloquear la base de datos
       puede hacerlo usando <literal>-</literal> en lugar de
       <literal>l</literal> o <literal>d</literal>. Cuando ninguna de las
       opciones <literal>d</literal>, <literal>l</literal> o
       <literal>-</literal> es usada, dba bloqueará el archivo de base de
       datos como si usara <literal>d</literal>.
      </para>
      <note>
       <para>
        Solo puede haber un escritor para un archivo de base de datos.
        Cuando use dba en un servidor web y más de una petición requiera
        operaciones de escritura, ellas sólo pueden hacerse una después de
        la otra. Asimismo, no es posible tener acceso de lectura durante un
        proceso de escritura. La extensión dba usa bloqueos para prevenir
        estas situaciones. Vea la siguiente tabla:
        <table>
         <title>Bloqueo DBA</title>
         <tgroup cols="9">
          <thead>
           <row>
            <entry>ya abierto</entry>
            <entry><parameter>modo</parameter> = "rl"</entry>
            <entry><parameter>modo</parameter> = "rlt"</entry>
            <entry><parameter>modo</parameter> = "wl"</entry>
            <entry><parameter>modo</parameter> = "wlt"</entry>
            <entry><parameter>modo</parameter> = "rd"</entry>
            <entry><parameter>modo</parameter> = "rdt"</entry>
            <entry><parameter>modo</parameter> = "wd"</entry>
            <entry><parameter>modo</parameter> = "wdt"</entry>
           </row>
          </thead>
          <tbody>
           <row>
            <entry>no abierto</entry>
            <entry>ok</entry>
            <entry>ok</entry>
            <entry>ok</entry>
            <entry>ok</entry>
            <entry>ok</entry>
            <entry>ok</entry>
            <entry>ok</entry>
            <entry>ok</entry>
           </row>
           <row>
            <entry><parameter>modo</parameter> = "rl"</entry>
            <entry>ok</entry>
            <entry>ok</entry>
            <entry>espera</entry>
            <entry>falso</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
           </row>
           <row>
            <entry><parameter>modo</parameter> = "wl"</entry>
            <entry>espera</entry>
            <entry>falso</entry>
            <entry>espera</entry>
            <entry>falso</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
           </row>
           <row>
            <entry><parameter>modo</parameter> = "rd"</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
            <entry>ok</entry>
            <entry>ok</entry>
            <entry>espera</entry>
            <entry>falso</entry>
           </row>
           <row>
            <entry><parameter>modo</parameter> = "wd"</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
            <entry>inválido</entry>
            <entry>espera</entry>
            <entry>falso</entry>
            <entry>espera</entry>
            <entry>falso</entry>
           </row>
          </tbody>
         </tgroup>
        </table>
        <simplelist>
         <member>ok: la segunda llamada será exitosa.</member>
         <member>espera: la segunda llamada espera hasta que
         <function>dba_close</function> sea llamado para el
         primero.</member>
         <member>falso: la segunda llamada devuelve falso.</member>
         <member>inválido: no debe mezclar los modificadores "l" y "d" para
         el parámetro <parameter>modo</parameter>.</member>
        </simplelist>
       </para>
      </note>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>gestor</parameter></term>
     <listitem>
      <para>
       El nombre del <link linkend="dba.requirements">gestor</link> que será
       usado para acceder a <parameter>ruta</parameter>. A él se le pasan
       todos los parámetros opcionales dados a <function>dba_open</function>
       y puede actuar sobre ellos.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>
 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Devuelve un gestor positivo en caso de éxito, o &false; si ocurre un
   error.
  </para>
 </refsect1>
 <refsect1 role="changelog">
  &reftitle.changelog;
  <para>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>&Version;</entry>
       <entry>&Description;</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>4.3.0</entry>
       <entry>
        Es posible abrir archivos de base de datos sobre una conexión de
        red. Sin embargo en casos en los que se usa una conexión de socket
        (como http o ftp) la conexión será bloqueada en lugar del recurso
        mismo. Esto es importante ya que en tales casos el bloqueo es
        simplemente ignorado sobre el recurso y deben encontrarse otras
        soluciones.
       </entry>
      </row>
      <row>
       <entry>4.3.0</entry>
       <entry>
        El bloqueo y los modificadores de <parameter>modo</parameter> "l",
        "d", "-" y "t" fueron agregados. En versiones anteriores de PHP, es
        necesario usar semáforos para prevenir el acceso simultáneo a bases
        de datos para cualquier gestor de bases de datos con excepción de
        GDBM. Vea el <link linkend="ref.sem">soporte de semáforos tipo
        Sistema V</link>.
       </entry>
      </row>
      <row>
       <entry>antes de 4.3.5</entry>
       <entry>
        El modo de apertura 'c' está dañado para varios gestores internos y
        trunca la base de datos en lugar de añadir los datos a una base de
        datos existente. Asimismo, dm y ndbm fallan en modo 'c' para
        configuraciones típicas (esto no puede arreglarse).
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </para>
 </refsect1>
 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>dba_popen</function></member>
    <member><function>dba_close</function></member>
   </simplelist>
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
