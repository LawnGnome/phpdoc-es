<?xml version="1.0" encoding="iso-8859-1"?>
<reference id="ref.dba">
  <title>Funciones de la capa de abstraccion de bases de datos (dbm-style)</title>
  <titleabbrev>dba</titleabbrev>

  <partintro>
   <para>
    Estas funciones son la base para el acceso a bases de datos del estilo 
    Berkeley DB.</para>

   <para>
    Este es un nivel de abstraccion general para varias bases de datos. Como tal
    su funcionalidad esta limitada a un grupo de modernas bases de datos como 
    <ulink url="">Sleepycat Software's DB2</ulink>. (Esta no debe confundirse
    con IBM DB2 software, la cual es soportada mediante las funciones
    <link linkend="ref.odbc">ODBC</link>.)</para>

   <para>
    El comportamiento de varios aspectos depende de la implementacion de la
    base de datos. Funciones como <function>dba_optimize</function> y 
    <function>dba_sync</function> cumpliran su funcionalidad con unas bases
    de datos pero no con otras.</para>

   <para>
    Los siguientes manejadores (handlers) estan soportados:

    <itemizedlist>
     <listitem><simpara>
     dbm es el mas antiguo (original) tipo de base de datos de la familia de
     Berkeley DB. Se debe evitar su uso, si es posible. Nosotros no soportamos
     las funciones de compatibilidad de DB2 y gdbm, porque ellas solo son
     compatibles a nivel de codigo fuente, pero no pueden manejar el formato
     original dbm.</simpara></listitem>
      
     <listitem><simpara>
      ndbm es un tipo mas nuevo y mas flexible que dbm. Todavia tiene la mayoria
      de las limitaciones de dbm (Por lo tanto es descartado).</simpara></listitem>

     <listitem><simpara>
      gdbm es el gestor de bases de datos de <ulink url="">GNU (database manager)</ulink>.
     </simpara></listitem>

     <listitem><simpara>
      db2 es <ulink url="">Sleepycat Software's DB2</ulink>. Es descrito como
      "un conjunto de herramientas de programacion que proveen acceso de alto
      nivel a bases de datos en aplicaciones standalone o en el modelo cliente/servidor.
      "</simpara></listitem>
 
     <listitem><simpara>
      cdb es "una rapida, de confianza, sencilla herramienta para la creacion y lectura de 
      bases de datos constantes." Fue creada por el autor de qmail y puede encontrarse en
      <ulink url="">here</ulink>. Como la base es constante solo se soportan las
      operaciones de lectura.</simpara></listitem>

    </itemizedlist></para>

   <para>
    <example>
     <title>Ejemplo de DBA</title>
     <programlisting>
&lt;?php

$id = dba_open("/tmp/test.db", "n", "db2");

if(!$id) {
    echo "dba_open failed\n";
    exit;
}

dba_replace("key", "This is an example!", $id);

if(dba_exists("key", $id)) {
    echo dba_fetch("key", $id);
    dba_delete("key", $id);
}

dba_close($id);
?&gt;
</programlisting></example></para>

   <para>
    DBA es "binary safe" y no tiene ningun limite arbitrario. Hereda todas sus limitaciones
    de la implementacion de base de datos que tenga. </para>

   <para>
    Todos las bases de datos basadas en ficheros deben proveer un mecanismo para establecer
    el modo a la hora de crear nuevas bases de datos, si ello es posible. Habitualmente este modo
    es pasado como el cuarto argumento en <function>dba_open</function> o en 
    <function>dba_popen</function>.</para>

   <para>
    Se puede acceder a todas las entradas de una base de datos de modo secuencial (lineal) usando 
    las funciones <function>dba_firstkey</function> y <function>dba_nextkey</function>. No se puede
    cambiar la base de datos mientras se recorre (traversing) por ella. </para>
    
   <para>
    <example>
     <title>Recorriendo una base de datos</title>
     <programlisting>
&lt;?php

# ...open database...

$key = dba_firstkey($id);

while($key != false) {
    if(...) { # remember the key to perform some action later
        $handle_later[] = $key;
    }
    $key = dba_nextkey($id);
}

for($i = 0; $i &lt; count($handle_later); $i++)
    dba_delete($handle_later[$i], $id);

?&gt;
	 </programlisting>
	</example>
   </para>

  </partintro>











&reference.dba.functions;

 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

