<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 297028 Maintainer: seros Status: ready -->
<refentry xml:id="function.hw-modifyobject" xmlns="http://docbook.org/ns/docbook">
 <refnamediv>
  <refname>hw_Modifyobject</refname>
  <refpurpose>Modifica un registro de objetos</refpurpose>
 </refnamediv>
 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>bool</type><methodname>hw_modifyobject</methodname>
   <methodparam><type>int</type><parameter>connection</parameter></methodparam>
   <methodparam><type>int</type><parameter>object_to_change</parameter></methodparam>
   <methodparam><type>array</type><parameter>remove</parameter></methodparam>
   <methodparam><type>array</type><parameter>add</parameter></methodparam>
   <methodparam choice="opt"><type>int</type><parameter>mode</parameter></methodparam>
  </methodsynopsis>
  <para>
   Este comando permite eliminar, añadir o modificar atributos individuales
   de un registro de objetos. El objeto es especificado por el ID de Objeto
   <parameter>object_to_change</parameter>.
   Para modificar un atributo se tendrá que eliminar
   el antigua y añadir el nuevo. <function>hw_modifyobject</function>
   siempre eliminará los atributos antes de añadir atributos a menos que
   el valor del atributo a eliminar no sea una cadena o un array.
  </para>
  <para>
   Las claves de ambos array son los nombres de los atributos. El valor de cada
   elemento del array puede ser un array, una cadena o cualquier otra cosa.
   Si es un array
   cada valor del atributo está construido mediante la clave de cada elemento más
   dos puntos y el valor de cada elemento. Si es una cadena se toma
   como el valor del atributo. Una cadena vacía resultará en la eliminación completa
   de ese atributo. Si el valor no es una cadena o un array
   pero es algo como, p.ej., un valor integer, no se realizará ninguna operación
   en absoluto sobre el atributo. Esto es necesario se se quiere
   añadir un atributo completamente nuevo, y no sólo un nuevo valor de un atributo
   existente. Si el array remove contiene
   una cadena vacía para ese atributo, se intentará eliminar el atributo,
   lo que fallará ya que no existe. La siguiente adición de
   un nuevo valor para ese atributo también fallará. Establecer el valor
   de un atributo a, p.ej., 0 no intentará eliminarlo y la
   adición funcionará.
  </para>
  <para>
   Si le gustaría cambiar el atributo 'Name' con el valor
   actual 'books' dentro de 'articles' tendrá que crear dos array
   y llamar a <function>hw_modifyobject</function>.
   <example>
    <title>modificar un atributo</title>
    <programlisting role="php">
<![CDATA[
<?php
       // $connect es una conexión existente al servirdor Hyperwave
       // $objid es el ID del objeto a modificar
       $remarr = array("Name" => "books");
       $addarr = array("Name" => "articles");
       $hw_modifyobject($connect, $objid, $remarr, $addarr);
?>
]]>
    </programlisting>
   </example>
   Para borrar/añadir un par nombre=valor al registro de objetos
   pase el array remove/add y establezca el parámetro last/third a un array
   vacío. Si el atributo es el primero con ese nombre a añadir, establezca
   el valor del atributo en el array remove a un valor integer.
   <example>
    <title>añadir un atributo completamente nuevo</title>
    <programlisting role="php">
<![CDATA[
<?php
       // $connect es una conexión existente al servirdor Hyperwave
       // $objid es el ID del objeto a modificar
       $remarr = array("Name" => 0);
       $addarr = array("Name" => "articles");
       $hw_modifyobject($connect, $objid, $remarr, $addarr);
?>
]]>
    </programlisting>
   </example>
  </para>
  <para>
   <note>
    <simpara>
     Los atributos multilenguaje, p.ej., 'Title', pueden ser modificados de dos
     maneras. Proporcionando los valores de los atributos en su forma nativa
     'lenguaje':'título' o proporcionando un array con elementos
     para cada lenguaje como se describió arriba. El ejemplo de arriba
     debería ser:
    </simpara>
   </note>
   <example>
    <title>modificar el atributo Title</title>
    <programlisting role="php">
<![CDATA[
<?php
       $remarr = array("Title" => "en:Books");
       $addarr = array("Title" => "en:Articles");
       $hw_modifyobject($connect, $objid, $remarr, $addarr);
?>
]]>
    </programlisting>
   </example>
    o
   <example>
    <title>modificar el atributo Title</title>
    <programlisting role="php">
<![CDATA[
<?php
       $remarr = array("Title" => array("en" => "Books"));
       $addarr = array("Title" => array("en" => "Articles", "ge"=>"Artikel"));
       $hw_modifyobject($connect, $objid, $remarr, $addarr);
?>
]]>
    </programlisting>
   </example>
   Esto elimina el título inglés 'Books' y añade el título inglés
   'Articles' y el título alemán 'Artikel'.
   <example>
    <title>removing attribute</title>
    <programlisting role="php">
<![CDATA[
<?php
       $remarr = array("Title" => "");
       $addarr = array("Title" => "en:Articles");
       $hw_modifyobject($connect, $objid, $remarr, $addarr);
?>
]]>
    </programlisting>
   </example>
   <note>
    <simpara>
     Esto eliminará todos los atributos con el nombre 'Title' y añadirá
     un nuevo atributo 'Title'. Esto es útil si se quieren
     eliminar atributos recursivamente.
    </simpara>
   </note>
   <note>
    <simpara>
     Si necesita borrar todos los atributos con un cierto nombre
     tendrá que pasar una cadena vacía al valor del atributo.
    </simpara>
   </note>
   <note>
    <simpara>
     Sólo los atributos 'Title', 'Description' y 'Keyword'
     tratarán adecuadamente el prefijo de lenguaje. Si estos atributos no portan
     un prefijo de lenguaje, se asignará el prefijo 'xx'.
    </simpara>
   </note>
   <note>
    <simpara>
     El atributo 'Name' es algo especial. En algunos casos no se puede
     eliminar completamente. Obtendrá un mensaje de error 'Change of base
     attribute' - 'Cambio de atributo base' (no está claro cuando sucede). Por lo tanto, siempre
     tendrá que añadir un nuevo Name primero y después eliminar el antiguo.
    </simpara>
   </note>
   <note>
    <simpara>
     No se puede rodear esta función mediante llamadas a
     <function>hw_getandlock</function> y <function>hw_unlock</function>.
     <function>hw_modifyobject</function> hace esto internamente.
    </simpara>
   </note>
  </para>
 </refsect1>
 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>connection</parameter></term>
     <listitem>
      <para>
       El identificador de conexión.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>object_to_change</parameter></term>
     <listitem>
      <para>
       El objeto a cambiar.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>remove</parameter></term>
     <listitem>
      <para>
       Un array de atributos a eliminar.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>add</parameter></term>
     <listitem>
      <para>
       Un array de atributos a añadir.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>mode</parameter></term>
     <listitem>
      <para>
       El último parámetro determina si la modificación se lleva a cabo
       recursivamente. 1 significa modificaión recursiva. Si alguno de los objetos
       no puede ser modificado lo saltará si avisar.
       <function>hw_error</function> puede no indicar un error aunque algunos de
       los objetos no puedan ser modificados.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>
 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   &return.success;
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
