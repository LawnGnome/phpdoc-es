<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 328569 Maintainer: seros Status: ready -->
<!-- Reviewed: no -->

<chapter xml:id="mongo.testing" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Ejecutar los test del controlador</title>
 
 <para>
  El paquete PECL no incluyen los test, pero están disponible es
  <link xlink:href="&url.mongodb.github;">Github</link>. Hay dos tipos de
  test: los test .phpt y los test PHPUnit. Los test PHPUnit están siendo
  reemplazados por los test .phpt.
 </para>
 
 <section>
  <title>Los test .phpt</title>
  <para>
   Los test .phpt son la forma estándar de probar extensiones de PHP. Después de compilar
   el controlador MongoDB con "make", se puede hacer "make test" para ejecutar los
   test. Estos test requieren que MongoDB se esté ejecutando, y por lo tanto, es necesario
   configurar el conjunto de test en sí. Esto se hace editanto el fichero
   <literal>tests/mongo-test-cfg.inc</literal>.
  </para>
  <para>
   Hay más información sobre esto en las directivas de contribución en 
   <link xlink:href="https://github.com/mongodb/mongo-php-driver/blob/master/CONTRIBUTING.md#running-the-tests">GitHub</link>.
  </para>
 </section>
 
 <section>
  <title>Los test PHPUnit</title>
  <para>
   Para ejecutarlos, debe descargar el driver de Github (los test se encuentran en
   el directorio <literal>tests/</literal>). También necesitará
   <link xlink:href="&url.phpunit.install;">PHPUnit</link> para ejecutar los test.
   PHPUnit también se puede instalar mediante PEAR (hay un par de prerrequisitos
   que podrá consultar en las instrucciones de instalación).
  </para>
  <para>
   Algunos test esperarán que se produzcan alertas y errores, por lo que se debe asignar 
   <literal>error_reporting</literal> en <literal>php.ini</literal> a
   <literal>E_STRICT | E_ALL</literal> para que pasen estos test. En caso contrario,
   se obtendrán errores que indicaran que el test esperaba que se emitiera una alerta
   o error.
  </para>
  <para>
   Para ejecutarlos, asegúrese de que el servidor de MongoDB se está ejecutando en local en
   el puerto 27017. Antes de notificar de un error, por favor, asegúrese de que ha ejecutado los test
   contra la última versión de desarrollo de MongoDB: a veces hay errores para funcionalidades que
   ya no se encuentran en la versión estable.
  </para>
  <para>
   La suite de pruebas usa la base de datos "phpunite". En caso de que utilice en su aplicación 
   una base de datos llamada "phpunit", asegúrese de indicar a MongoDB un nuevo directorio de datos
   antes de ejecutar los test.
  </para>
  <para>
   Asegúrese de que se encuentra en el directorio principal del código fuente del driver que
   descargó de Github. Ejecute:
  </para>
  <programlisting>
<![CDATA[

$ phpunit tests/MongoSuite.php

]]>
  </programlisting>
 </section>
 
 <section>
  <title>Notificando Errores</title>
  <para>
   Por favor, notifique cualquier fallo o error en el
   <link xlink:href="&url.mongodb.jira;">bugtracker</link>. Podría haber test que se omitan.
   Esto es normal, por lo que puede ignorarlo.
  </para>
  <para>
   ¡Los nuevos test siempre son bienvenidos! Por favor, no dude en contribuir con nuevos test
   de cualquier tipo que pongan a prueba cualquier funcionalidad.
  </para>
 </section>
</chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

