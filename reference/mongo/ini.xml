<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 313602 Maintainer: chuso Status: ready -->
<section xml:id="mongo.configuration" xmlns="http://docbook.org/ns/docbook">
 <title>Opciones en php.ini</title>
 &extension.runtime;
 <para>
  <table>
   <title>&ConfigureOptions; Mongo</title>
   <tgroup cols="3">
    <thead>
     <row>
      <entry>&Name;</entry>
      <entry>&Default;</entry>
      <entry>&Changeable;</entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry><link linkend="ini.mongo.native-long">mongo.native_long</link></entry>
      <entry>false<link linkend="ini.mongo.native-long">*</link></entry>
      <entry>PHP_INI_ALL</entry>
     </row>
     <row>
      <entry><link linkend="ini.mongo.long-as-object">mongo.long_as_object</link></entry>
      <entry>false</entry>
      <entry>PHP_INI_ALL</entry>
     </row>
     <row>
      <entry><link linkend="ini.mongo.default-host">mongo.default_host</link></entry>
      <entry>"localhost"</entry>
      <entry>PHP_INI_ALL</entry>
     </row>
     <row>
      <entry><link linkend="ini.mongo.default-port">mongo.default_port</link></entry>
      <entry>27017</entry>
      <entry>PHP_INI_ALL</entry>
     </row>
     <row>
      <entry><link linkend="ini.mongo.auto-reconnect">mongo.auto_reconnect</link></entry>
      <entry>true</entry>
      <entry>PHP_INI_SYSTEM</entry>
     </row>
     <row>
      <entry><link linkend="ini.mongo.allow-persistent">mongo.allow_persistent</link></entry>
      <entry>true</entry>
      <entry>PHP_INI_SYSTEM</entry>
     </row>
     <row>
      <entry><link linkend="ini.mongo.chunk-size">mongo.chunk_size</link></entry>
      <entry>262144</entry>
      <entry>PHP_INI_SYSTEM</entry>
     </row>
     <row>
      <entry><link linkend="ini.mongo.cmd">mongo.cmd</link></entry>
      <entry>"$"</entry>
      <entry>PHP_INI_ALL</entry>
     </row>
     <row>
      <entry><link linkend="ini.mongo.utf8">mongo.utf8</link></entry>
      <entry>"1"</entry>
      <entry>PHP_INI_ALL</entry>
     </row>
     <row>
      <entry><link linkend="ini.mongo.allow_empty_keys">mongo.allow_empty_keys</link></entry>
      <entry>false</entry>
      <entry>PHP_INI_ALL</entry>
     </row>
    </tbody>
   </tgroup>
  </table>
  &ini.php.constants;
 </para>

 &ini.descriptions.title;

 <para>
  <variablelist>
   <varlistentry xml:id="ini.mongo.native-long">
    <term>
     <parameter>mongo.native-long</parameter>
     <type>int</type>
    </term>
    <listitem>
     <para>
      <emphasis>
       Este valor por omisión cambiará a &true; en 2.0.0, por lo que deberá
       asegurarse al establecer el valor deseado (probablemente &true;) de
       manera que el comportamiento del driver no se vea afectado al actualizar.
      </emphasis>
     </para>
     <para>
      En plataformas de 64 bits, el ajuste <literal>mongo.native_long</literal>
      permite almacenar enteros de 64 bits en MongoDB. Si no se habilitara, sólo se
      podrán almacenar enteros de 32 bits. El tipo de dato MongoDB usado en
      este caso es el BSON LONG, en lugar del BSON INT, que es el que funciona
      cuando se deshabilita este ajuste.
     </para>
     <para>
      Este ajuste también cambia el modo en que los BSON LONG se comportan cuando se
      consultan en MongoDB. Cuando <literal>mongo.native_long</literal> no está habilitado,
      el driver convierte todos los BSON LONG al tipo double de PHP, por lo que podría
      provocar pérdida de precisión.
     </para>
     <para>
      En plataformas de 32 bits, el ajuste <literal>mongo.native_log</literal> no
      tiene efecto al almacenar enteros en MongoDB: los enteros se almacenan
      como BSON INT. Sin embargo, cuando este ajuste está habilitado y se consulta
      un BSON LONG en MongDB, se emitirá una excepción
      <classname>MongoCursorException</classname> alertando de que no se puede
      evitar la pérdida de precisión en la lectura.
     </para>
     <para>
      Se recomienda que, en sistemas de 32 bits, además de esto se habilite
      <literal>mongo.long_as_object</literal>.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry xml:id="ini.mongo.long-as-object">
    <term>
     <parameter>mongo.long_as_object</parameter>
     <type>string</type>
    </term>
    <listitem>
     <para>
      Devuelve eun BSON_LONG como una instancia de <classname>MongoInt64</classname>
      (en lugar de usar el tipo primitivo).
     </para>
    </listitem>
   </varlistentry>

   <varlistentry xml:id="ini.mongo.default-host">
    <term>
     <parameter>mongo.default_host</parameter>
     <type>string</type>
    </term>
    <listitem>
     <para>
      Nombre de host por omisión en caso de que no se especifique en el constructor.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry xml:id="ini.mongo.default-port">
    <term>
     <parameter>mongo.default_port</parameter>
     <type>string</type>
    </term>
    <listitem>
     <para>
      Puerto TCP por omisión al conectar al servidor de bases de datos en caso
      de que no se especifique ningún puerto. El puerto por omisión es
      <literal>27017</literal>.
     </para>
    </listitem>
   </varlistentry>
  
   <varlistentry xml:id="ini.mongo.auto-reconnect">
    <term>
     <parameter>mongo.auto_reconnect</parameter>
     <type>bool</type>
    </term>
    <listitem>
     <para>
      Indica si se debe reconectar o no a la base de datos al perder la conexión.
     </para>
    </listitem>
   </varlistentry>  

   <varlistentry xml:id="ini.mongo.allow-persistent">
    <term>
     <parameter>mongo.allow_persistent</parameter>
     <type>bool</type>
    </term>
    <listitem>
     <para>
      Indica si se permiten o no conexiones persistentes.
     </para>
    </listitem>
   </varlistentry>  

   <varlistentry xml:id="ini.mongo.chunk-size">
    <term>
     <parameter>mongo.chunk_size</parameter>
     <type>int</type>
    </term>
    <listitem>
     <para>
      Número de bytes por bloque. Se usa al fragmentar ficheros GridFS. Este valor
      debe ser al menos 100 veces menor que 4 megabytes (máx: 4194204) y se recomienda
      que sea incluso menor.
     </para>
    </listitem>
   </varlistentry>  

   <varlistentry xml:id="ini.mongo.cmd">
    <term>
     <parameter>mongo.cmd</parameter>
     <type>string</type>
    </term>
    <listitem>
     <para>
      Carácter que se utiliza en lugar de $ en los modificadores y comparaciones.
     </para>
     <para>
      En vista de que es fácil olvidar escapar el carácter "$", puede elegirse
      cualquier otro en su lugar. Escoja un carácter que no aparezca en sus
      nombres de clave, como por ejemplo ":":
     </para>
     <programlisting>
<![CDATA[
mongo.cmd = ":"
]]>
     </programlisting>
     <para>
      Ahora, para hacer una comparación, sería:
     </para>
     <programlisting role="php">
<![CDATA[
<?php

$query = array( "i" => array( ":gt" => 20, ":lte" => 30 ) );

?>
]]>
     </programlisting>
     <para>
      Puede cambiarse también en tiempo de ejecución usando
      <literal>ini_set("mongo.cmd", ":")</literal>.  Por supuesto, también
      pueden usarse comillas simples o la barra \ para escapar el carácter $.
     </para>
    </listitem>
   </varlistentry>  

   <varlistentry xml:id="ini.mongo.utf8">
    <term>
     <parameter>mongo.utf8</parameter>
     <type>int</type>
    </term>
    <listitem>
     <para>
      Indica si se debe lanzar una excepción con textos que no sean UTF8. Hasta la versión
      1.0.4, el driver de PHP ignoraba las cadenas no UTF8, incluso cuando no
      se esperaba que se fueran a insertar. Desde 1.0.4, el driver emite una
      <classname>MongoException</classname>. Para facilitar la transicion en las 
      aplicaciones que insertan textos no UTF8, puede deshabiltiarse esta opción, emulando
      el comportamiento anterior en que no se emitían excepciones. Sin embargo, esta opción
      será eliminada en la versión 1.1.0, de manera que siempre se emitirán excepciones en
      textos no UTF8.
     </para>
    </listitem>
   </varlistentry>  

   <varlistentry xml:id="ini.mongo.allow_empty_keys">
    <term>
     <parameter>mongo.allow_empty_keys</parameter>
     <type>int</type>
    </term>
    <listitem>
     <para>
      Añadido en la versión 1.0.11.
     </para>
     <para>
      Indica si se permiten un texto vacío ("") como nombre de claves. Por omisión,
      el driver emitirá una excepción al proporcionar un texto vacío como clave en la
      base de datos. Es muy fácil pasar esto por alto al usar comillas dobles con
      operandos $, por lo que se recomienda dejar el valor por omisión. Sin embargo,
      si fuera necesario almacenar claves vacías, puede asignarse true a esta opción,
      de manera que el driver permita usar un texto vacío a la base de datos.
     </para>
    </listitem>
   </varlistentry>  

  </variablelist>
 </para>
</section>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
