<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.6 $ -->
<!-- EN-Revision: 1.34 Maintainer: lboshell Status: ready -->
<refentry id="function.mail">
 <refnamediv>
  <refname>mail</refname>
  <refpurpose>Enviar correo</refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>bool</type><methodname>mail</methodname>
   <methodparam><type>string</type><parameter>para</parameter></methodparam>
   <methodparam><type>string</type><parameter>asunto</parameter></methodparam>
   <methodparam><type>string</type><parameter>mensaje</parameter></methodparam>
   <methodparam choice="opt"><type>string</type><parameter>cabeceras_adicionales</parameter></methodparam>
   <methodparam choice="opt"><type>string</type><parameter>parametros_adicionales</parameter></methodparam>
  </methodsynopsis>
  <para>
   Env&iacute;a un correo electr&oacute;nico.
  </para>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>para</parameter></term>
     <listitem>
      <para>
       Recipiente, o recipientes del correo.
      </para>
      <para>
       El formato de esta cadena debe ser compatible con el documento
       <ulink url="&url.rfc;2822">RFC 2822</ulink>. Algunos ejemplos
       son:
       <simplelist>
        <member>usuario@example.com</member>
        <member>usuario@example.com, otrousuario@example.com</member>
        <member>Usuario &lt;usuario@example.com&gt;</member>
        <member>Usuario &lt;usuario@example.com&gt;, Otro Usuario
        &lt;otrousuario@example.com&gt;</member>
       </simplelist>
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>asunto</parameter></term>
     <listitem>
      <para>
       Asunto del correo electr&oacute;nico a ser enviado.
      </para>
      <caution>
       <para>
        &Eacute;ste no debe contener caracteres de salto de
        l&iacute;nea, o es posiblo que el correo no sea enviado
        apropiadamente.
       </para>
      </caution>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>mensaje</parameter></term>
     <listitem>
      <para>
       Mensaje a ser enviado.
      </para>
      <para>
       Cada l&iacute;nea debe ser sepadarada con un caracter LF
       (\n). Las l&iacute;neas no deber&iacute;an exceder los 70
       caracteres.
      </para>
      <caution>
       <para>
        (S&oacute;lo en Windows) Cuando PHP sostiene
        comunicaci&oacute;n con el servidor SMTP directamente, si un
        punto es encontrado al comienzo de la l&iacute;nea,
        &eacute;ste es removido. Para contrarestar este
        comportamiento, reemplace estas ocurrencias con dos puntos.
        <programlisting role="php">
<![CDATA[
<?php
$texto = str_replace("\n.", "\n..", $texto);
?>
]]>
        </programlisting>
       </para>
      </caution>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>cabeceras_adicionales</parameter> (opcional)</term>
     <listitem>
      <para>
       Cadena a ser insertada al final de la cabecera de correo
       electr&oacute;nico.
      </para>
      <para>
       Por lo general, este par&aacute;metro es usado para agregar
       cabeceras extra (From, Cc y Bcc). M&uacute;ltiples cabeceras
       extra deben ser separadan con una secuencia CRLF (\r\n).
      </para>
      <note>
       <para>
        Cuando env&iacute;e correo, el mensaje
        <emphasis>debe</emphasis> contener una cabecera
        <literal>From</literal>. &Eacute;sta puede definirse con el
        par&aacute;metro <parameter>cabeceras_adicionales</parameter>,
        o puede definirse un valor predeterminado en &php.ini;.
       </para>
       <para>
        No hacer esto resultar&aacute; en un mensaje de error similar
        a <literal>Warning: mail(): "sendmail_from" not set in php.ini
        or custom "From:" header missing</literal>.
       </para>
      </note>
      <note>
       <para>
        Si los mensajes no son recibidos, intente usar un caracter LF
        (\n) solamente. Algunos agentes de transferencia de correo de
        pobre calidad en Unix reemplazan LF por CRLF
        autom&aacute;ticamente (lo cual conlleva a caracteres CR
        dobles si se usa CRLF). Esto debe ser usado como &uacute;ltimo
        recurso, ya que no es compatible con la especificaci&oacute;n
        en <ulink url="&url.rfc;2822">RFC 2822</ulink>.
       </para>
      </note>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>parametros_adicionales</parameter> (opcional)</term>
     <listitem>
      <para>
       El par&aacute;metro
       <parameter>parametros_adicionales</parameter> puede ser usado
       para pasar un par&aacute;metro extra al programa configurado
       para ser usado cuando se env&iacute;e correo mediante la
       opci&oacute;n de configuraci&oacute;n
       <literal>sendmail_path</literal>. Por ejemplo, este
       par&aacute;metro puede usarse para definir la direcci&oacute;n
       de sobre del origen cuando se usa sendmail con la opci&oacute;n
       <literal>-f</literal>.
      </para>
      <para>
       El usuario bajo el que corre su servidor web debe ser agregado
       como un usuario confiable en la configuraci&oacute;n de
       sendmail para prevenir que se agregue una cabecera 'X-Warning'
       a los mensajes cuando el origen de sobre (-f) sea definido
       usando este m&eacute;todo. Para usuarios de sendmail, este
       archivo es <filename>/etc/mail/trusted-users</filename>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Devuelve &true; si el correo fue aceptado satisfactoriamente para
   su env&iacute;o, o &false; de lo contrario.
  </para>
  <para>
   Es importante notar que solo porque el correo sea aceptado para su
   envio NO quiere decir que el correo realmente vaya a llegar a su
   destino planeado.
  </para>
 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <para>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>&Version;</entry>
       <entry>&Description;</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>4.3.0 (S&oacute;lo en Windows)</entry>
       <entry>
        Todas las cabeceras personalizadas (como From, Cc, Bcc y Date)
        son soportadas, y no son sensibles a may&uacute;sculas y
        min&uacute;sculas). (Dado que las cabeceras personalizadas no
        son interpretadas por el MTA en primer lugar, sino
        interpretadas por PHP, PHP &lt; 4.3 s&oacute;lo soportaba el
        elemento de cabecera Cc y era sensible a may&uacute;sculas y
        min&uacute;sculas).
       </entry>
      </row>
      <row>
       <entry>4.2.3</entry>
       <entry>
        El par&aacute;metro
        <parameter>parametros_adicionales</parameter> es deshabilitado
        en <link linkend="ini.safe-mode">modo seguro</link> y la
        funci&oacute;n <function>mail</function> producir&aacute; un
        mensaje de advertencia y devolver&aacute; &false; cuando sea
        usado.
       </entry>
      </row>
      <row>
       <entry>4.0.5</entry>
       <entry>
        El par&aacute;metro
        <parameter>parametros_adicionales</parameter> fue agregado.
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </para>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title>Env&iacute;o de correo.</title>
    <para>
     Uso de <function>mail</function> para enviar un correo simple:
    </para>
    <programlisting role="php">
<![CDATA[
<?php
// El mensaje
$mensaje = "Linea 1\nLinea 2\nLinea 3";

// En caso de que cualquier linea tenga mas de 70 caracteres, habria
// que usar wordwrap()
$mensaje = wordwrap($mensaje, 70);

// Enviar
mail('cafeinado@example.com', 'Mi Asunto', $mensaje);
?>
]]>
    </programlisting>
   </example>
   <example>
    <title>Env&iacute;o de correo con cabeceras extra.</title>
    <para>
     La adicici&oacute;n de cabeceras b&aacute;sicas, que le indican
     al MUA las direcciones From y Reply-To:
    </para>
    <programlisting role="php">
<![CDATA[
<?php
$para      = 'nadie@example.com';
$asunto    = 'el asunto';
$mensaje   = 'hola';
$cabeceras = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($para, $asunto, $mensaje, $cabeceras);
?>
]]>
    </programlisting>
   </example>
   <example>
    <title>Env&iacute;o de correo con un par&aacute;metro de
    l&iacute;nea de comandos adicional.</title>
    <para>
     El par&aacute;metro <parameter>parametros_adicionales</parameter>
     puede ser usado para pasar un par&aacute;metro adicional al
     programa configurado para usarse cuando se env&iacute;a correo
     con <literal>sendmail_path</literal>.
    </para>
    <programlisting role="php">
<![CDATA[
<?php
mail('nadie@example.com', 'el asunto', 'el mensaje', null,
   '-fwebmaster@example.com');
?>
]]>
    </programlisting>
   </example>
   <example>
    <title>Env&iacute;o de correo electr&oacute;nico HTML</title>
    <para>
     Tambi&eacute;n es posible enviar correo electr&oacute;nico en
     formato HTML con <function>mail</function>.
    </para>
    <programlisting role="php">
<![CDATA[
<?php
// multiples recipientes
$para  = 'aidan@example.com' . ', '; // note la coma
$para .= 'wez@example.com';

// asunto
$asunto = 'Recordatorios de Cumplea&ntilde;os para Agosto';

// mensaje
$mensaje = '
<html>
<head>
  <title>Recordatorios de Cumplea&ntilde;os para Agosto</title>
</head>
<body>
  <p>&iexcl;Aqu&iacute; est&aacute;n los cumplea&ntilde;os que vienen
  en Agosto!</p>
  <table>
    <tr>
      <th>Persona</th><th>D&iacute;a</th><th>Mes</th><th>A&ntilde;o</th>
    </tr>
    <tr>
      <td>Juan</td><td>3</td><td>Agosto</td><td>1970</td>
    </tr>
    <tr>
      <td>Sandra</td><td>17</td><td>Agosto</td><td>1973</td>
    </tr>
  </table>
</body>
</html>
';

// Para enviar correo HTML, la cabecera Content-type debe definirse
$cabeceras  = 'MIME-Version: 1.0' . "\r\n";
$cabeceras .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Cabeceras adicionales
$cabeceras .= 'To: Maria <maria@example.com>, Kelly <kelly@example.com>' . "\r\n";
$cabeceras .= 'From: Recordatorio de Cumplea&ntilde;os <recordatorio@example.com>' . "\r\n";
$cabeceras .= 'Cc: archivo@example.com' . "\r\n";
$cabeceras .= 'Bcc: chequeo@example.com' . "\r\n";

// Enviarlo
mail($para, $asunto, $mensaje, $cabaceras);
?>
]]>
    </programlisting>
    <para>
     <note>
      <para>
       Si desea enviar HTML u otros correos complejos, es recomendable
       usar el paquete PEAR <ulink
       url="&url.pear.package;Mail">PEAR::Mail</ulink>.
      </para>
     </note>
    </para>
   </example>
  </para>
 </refsect1>

 <refsect1 role="notes">
  &reftitle.notes;
  <note>
   <para>
    La implementaci&oacute;n en Windows de <function>mail</function>
    difiere en varias formas de la implementaci&oacute;n en
    Unix. Primero, no usa un binario local para componer mensajes, en
    su lugar opera directamente sobre sockets, lo que quiere decir que
    se requiere de un <literal>MTA</literal> que escuche sobre un
    socket de red (el cual puede estar en el host local o en una
    m&aacute;quina remota).
   </para>
   <para>
    Segundo, las cabeceras personalizadas como
    <literal>From:</literal>, <literal>Cc:</literal>,
    <literal>Bcc:</literal> y <literal>Date:</literal> <emphasis
    role="strong">no</emphasis> son interpretadas por el
    <literal>MTA</literal> en primera instancia, son interpretadas por
    PHP.
   </para>
   <para>
    Por lo anterior, el par&aacute;metro <parameter>para</parameter>
    no deber&iacute;a ser una direcci&oacute;n en la forma &quot;Algo
    &lt;alguien@example.com&gt;&quot;. Puede que el comando de correo
    no interprete apropiadamente &eacute;sto cuando se comunique con
    el MTA.
   </para>
  </note>

  <note>
   <para>
    Es posible enviar correo electr&oacute;nico con archivos adjuntos
    y tipos especiales de contenido (p.ej. HTML) usando esta
    funci&oacute;n. Esto se consigue mediante el uso de
    codificaci&oacute;n MIME - para m&aacute;s informaci&oacute;n, vea
    este <ulink url="&url.email.mime.zend;">art&iacute;culo de
    Zend</ulink> o las <ulink url="&url.pear.package;Mail_Mime">Clases
    Mime PEAR</ulink>.
   </para>
  </note>

  <note>
   <para>
    Cabe anotar que la funci&oacute;n <function>mail</function> no es
    recomendable para el env&iacute;o de correo electr&oacute;nico en
    volumen por medio de un ciclo. Esta funci&oacute;n abre y cierra
    un socket SMTP para cada correo, por lo que no resulta muy
    eficiente.
   </para>
   <para>
    Para el env&iacute;o de grandes cantidades de correo
    electr&oacute;nico, vea los paquetes <ulink
    url="&url.pear.package;Mail">PEAR::Mail</ulink> y <ulink
    url="&url.pear.package;Mail_Queue">PEAR::Mail_Queue</ulink>.
   </para>
  </note>

  <note>
   <para>
    Los siguientes documentos RFC pueden resultar &uacute;tiles:
    <ulink url="&url.rfc;1896">RFC 1896</ulink>, <ulink
    url="&url.rfc;2045">RFC 2045</ulink>, <ulink
    url="&url.rfc;2046">RFC 2046</ulink>, <ulink
    url="&url.rfc;2047">RFC 2047</ulink>, <ulink
    url="&url.rfc;2048">RFC 2048</ulink>, <ulink
    url="&url.rfc;2049">RFC 2049</ulink>, y <ulink
    url="&url.rfc;2822">RFC 2822</ulink>.
   </para>
  </note>
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>imap_mail</function></member>
    <member><ulink url="&url.pear.package;Mail">PEAR::Mail</ulink></member>
    <member><ulink url="&url.pear.package;Mail_Mime">PEAR::Mail_Mime</ulink></member>
   </simplelist>
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
