<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.4 $ -->
<!-- EN-Revision: 1.27 Maintainer: lboshell Status: ready -->
<!-- splitted from ./en/functions/filesystem.xml, last change in rev 1.2 -->
  <refentry id="function.fopen">
   <refnamediv>
    <refname>fopen</refname>
    <refpurpose>Abre un archivo o URL</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripci&oacute;n</title>
     <methodsynopsis>
      <type>resource</type><methodname>fopen</methodname>
      <methodparam><type>string</type><parameter>nombre_archivo</parameter></methodparam>
      <methodparam><type>string</type><parameter>modo</parameter></methodparam>
      <methodparam choice="opt"><type>bool</type><parameter>usar_ruta_inclusion</parameter></methodparam>
      <methodparam choice="opt"><type>resource</type><parameter>contexto_z</parameter></methodparam>
     </methodsynopsis>
    <simpara>
     <function>fopen</function> asocia un recurso con nombre,
     especificado por <parameter>nombre_archivo</parameter>, a una
     secuencia. Si <parameter>nombre_archivo</parameter> es de la
     forma "esquema://...", se asume que es una URL y PHP
     buscar&aacute; por un gestor de protocolo (tambi&eacute;n
     conocido como envoltura) para tal esquema. Si no hay envolturas
     registradas para ese protocolo, PHP emitir&aacute; una noticia
     para ayudarle a rastrear problemas potenciales en su script, y
     luego contin&uacute;a como si
     <parameter>nombre_archivo</parameter> indicara un archivo
     corriente.
    </simpara>
    <simpara>
     Si PHP decide que <parameter>nombre_archivo</parameter> hace
     referencia a un archivo local, entonces intentar&aacute; abrir
     una secuencia sobre ese archivo. El archivo debe ser asequible
     para PHP, as&iacute; que debe asegurarse de que los permisos de
     acceso del archivo sean los apropiados. Si tiene habilitado
     &safemode;, o <link
     linkend="ini.open-basedir">open_basedir</link>, pueden aplicarse
     mayores restricciones.
    </simpara>
    <simpara>
     Si PHP decide que <parameter>nombre_archivo</parameter> hace
     referencia a un protocolo registrado, y ese protocolo est&aacute;
     registrado como una URL de red, PHP verificar&aacute; que <link
     linkend="ini.allow-url-fopen">allow_url_fopen</link> se encuentre
     habilitado. Si no es as&iacute;, PHP emitir&aacute; una
     advertencia y la llamada a fopen fallar&aacute;.
    </simpara>
    <note>
     <simpara>
      La lista de protocolos soportados puede encontrarse en <xref
      linkend="wrappers"/>. Algunos protocolos (tambi&eacute;n
      conocidos como <literal>envolturas</literal>) soportan un
      <literal>contexto</literal> u opciones
      &php.ini;. Refi&eacute;rase a la p&aacute;gina espec&iacute;fica
      del protocolo en uso para una lista de opciones que pueden
      definirse. (p.ej. el valor &php.ini;
      <literal>user_agent</literal> usado por la envoltura
      <literal>http</literal>)
     </simpara>
    </note>
    &note.context-support;
    <note>
     <simpara>
      A partir de PHP 4.3.2, el modo predeterminado es definido como
      binario para todas las plataformas que distinguen entre modos
      binario y de texto. Si est&aacute; experimentando problemas con
      sus scripts despu&eacute;s de actualizarse, intente usar la
      bandera <literal>'t'</literal> como soluci&oacute;n temporal
      hasta que haga su script m&aacute;s portable, tal y como se
      explica m&aacute;s adelante.
     </simpara>
    </note>
    <para>
     El par&aacute;metro <parameter>modo</parameter> especifica el
     tipo de acceso que requiere para la secuencia. Puede ser
     cualquiera de los siguientes valores:
     <table>
      <title>
       Una lista de modos posibles para <function>fopen</function>
       usando <parameter>modo</parameter>
      </title>
      <tgroup cols="2">
       <thead>
        <row>
         <entry><parameter>modo</parameter></entry>
         <entry>Descripci&oacute;n</entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry><literal>'r'</literal></entry>
         <entry>
          Apertura para s&oacute;lo lectura; ubica el apuntador de
          archivo al comienzo del mismo.
         </entry>
        </row>
        <row>
         <entry><literal>'r+'</literal></entry>
         <entry>
          Apertura para lectura y escritura; ubica el apuntador de
          archivo al comienzo del mismo.
         </entry>
        </row>
        <row>
         <entry><literal>'w'</literal></entry>
         <entry>
          Apertura para s&oacute;lo escritura; ubica el apuntador de
          archivo al comienzo de &eacute;ste y lo trunca a una
          longitud de cero. Si el archivo no existe, intenta crearlo.
         </entry>
        </row>
        <row>
         <entry><literal>'w+'</literal></entry>
         <entry>
          Apertura para lectura y escritura; ubica el apuntador de
          archivo al comienzo de &eacute;ste y lo trunca a una
          longitud cero. Si el archivo no existe, intenta crearlo.
         </entry>
        </row>
        <row>
         <entry><literal>'a'</literal></entry>
         <entry>
          Apertura para s&oacute;lo escritura; ubica el apuntador de
          archivo al final del mismo. Si el archivo no existe, intenta
          crearlo.
         </entry>
        </row>
        <row>
         <entry><literal>'a+'</literal></entry>
         <entry>
          Apertura para lectura y escritura; ubica el apuntador de
          archivo al final del mismo. Si el archivo no existe, intenta
          crearlo.
         </entry>
        </row>
        <row>
         <entry><literal>'x'</literal></entry>
         <entry>
          Creaci&oacute;n y apertura para s&oacute;lo escritura; ubica
          el apuntador de archivo al comienzo de &eacute;ste. Si el
          archivo ya existe, la llamada a <function>fopen</function>
          fallar&aacute; devolviendo &false; y generando un error de
          nivel <constant>E_WARNING</constant>. Si el archivo no
          existe, intenta crearlo. Esto es equivalente a especificar
          las banderas <literal>O_EXCL|O_CREAT</literal> en la llamada
          de sistema <literal>open(2)</literal> interna. Esta
          opci&oacute;n es soportada en PHP 4.3.2 y versiones
          posteriores, y s&oacute;lo funciona con archivos locales.
         </entry>
        </row>
        <row>
         <entry><literal>'x+'</literal></entry>
         <entry>
          Creaci&oacute;n y apertura para lectura y escritura; ubica
          el apuntador de archivo al comienzo de &eacute;ste. Si el
          archivo ya existe, la llamada a <function>fopen</function>
          fallar&aacute; devolviendo &false; y generando un error de
          nivel <constant>E_WARNING</constant>. Si el archivo no
          existe, intenta crearlo. Esto es equivalente a especificar
          las banderas <literal>O_EXCL|O_CREAT</literal> en la llamada
          de sistema <literal>open(2)</literal> interna. Esta
          opci&oacute;n es soportada en PHP 4.3.2 y versiones
          posteriores, y s&oacute;lo funciona con archivos locales.
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </para>
    <note>
     <para>
      Diferentes familias de sistemas operativos tienen diferentes
      convenciones sobre el final-de-l&iacute;nea. Cuando escribe a un
      archivo de texto y desea insertar un salto de l&iacute;nea,
      necesita usar los caracteres correctos de final-de-l&iacute;nea
      para su sistema operativo. Los sistemas basados en Unix usan
      <literal>\n</literal> como el caracter de final de l&iacute;nea,
      los sistemas basados en Windows usan <literal>\r\n</literal>
      como los caracteres de final de l&iacute;nea, y los sistemas
      basados en Macintosh usan <literal>\r</literal> como el caracter
      de final de l&iacute;nea.
     </para>
     <para>
      Si usa los caracteres de final de l&iacute;nea equivocados
      cuando crea sus archivos, puede que encuentre que otras
      aplicaciones que abren esos archivos lucir&aacute;n
      "extra&ntilde;o".
     </para>
     <para>
      Windows ofrece una bandera de traducci&oacute;n de modo-texto
      (<literal>'t'</literal>) la cual traducir&aacute;
      transparentemente <literal>\n</literal> a
      <literal>\r\n</literal> cuando trabaje con el archivo. En
      contraste, tambi&eacute;n puede usar <literal>'b'</literal> para
      forzar el modo binario, el cual no traduce sus datos. Para usar
      &eacute;stas banderas, indique <literal>'b'</literal> o
      <literal>'t'</literal> como el &uacute;ltimo caracter del
      par&aacute;metro <parameter>modo</parameter>.
     </para>
     <para>
      El modo de traducci&oacute;n predeterminado depende de la SAPI y
      la versi&oacute;n de PHP que usa, as&iacute; que es recomendable
      especificar siempre la bandera apropiada por razones de
      portabilidad. Deber&iacute;a usar el modo <literal>'t'</literal>
      si trabaja con archivos de texto-plano y usa
      <literal>\n</literal> para delimitar los finales de l&iacute;nea
      en su script, pero espera que sus archivos sean legibles en
      aplicaciones como el bloc de notas. Deber&iacute;a usar el modo
      <literal>'b'</literal> en todos los dem&aacute;s casos.
     </para>
     <para>
      Si no especifica la bandera 'b' cuando trabaja con archivos
      binarios, puede experimentar problemas con sus datos, incluyendo
      archivos de im&aacute;gen corruptos y problemas extra&ntilde;os
      con los caracteres <literal>\r\n</literal>.
     </para>
    </note>
    <note>
     <para>
      Por razones de portabilidad, es bastante recomendable que
      siempre usa la bandera 'b' cuando abre archivos con
      <function>fopen</function>.
     </para>
    </note>
    <note>
     <para>
      Nuevamente, por razones de portabilidad, es bastante
      recomendable que re-escriba el c&oacute;digo que usa o depende
      del modo <literal>'t'</literal>, de modo que use los finales de
      l&iacute;nea correctos y el modo <literal>'b'</literal> en su
      lugar.
     </para>
    </note>
    <para>
     El tercer par&aacute;metro, opcional,
     <parameter>usar_ruta_inclusion</parameter> puede definirse como
     '1' o &true; si desea buscar por el archivo en <link
     linkend="ini.include-path">include_path</link>, tambi&eacute;n.
    </para>
    <simpara>
     Si la apertura falla, la funci&oacute;n devuelve &false; y se
     genera un error de nivel <constant>E_WARNING</constant>. Es
     posible usar <link
     linkend="language.operators.errorcontrol">@</link> para suprimir
     tal advertencia.
    </simpara>
    <para>
     <example>
      <title>Ejemplos de <function>fopen</function></title>
      <programlisting role="php">
<![CDATA[
<?php
$gestor = fopen("/home/rasmus/archivo.txt", "r");
$gestor = fopen("/home/rasmus/archivo.gif", "wb");
$gestor = fopen("http://www.example.com/", "r");
$gestor = fopen("ftp://usuario:contrasenya@example.com/un_archivo.txt", "w");
?>
]]>
      </programlisting>
     </example>
    </para>
    <simpara>
     Si experimenta problemas con la lectura y escritura sobre
     archivos, y est&aacute; usando la versi&oacute;n tipo
     m&oacute;dulo de servidor de PHP, recuerde asegurarse de que los
     archivos y directorios que est&aacute; usando sean asequibles
     para el proceso del servidor.
    </simpara>
    <para>
     En la plataforma Windows, tenga cuidado de escapar cualquier
     barra invertida usada en la ruta al arcivo, o use barras hace
     adelante.
     <informalexample>
      <programlisting role="php">
<![CDATA[
<?php
$gestor = fopen("c:\\datos\\info.txt", "r");
?>
]]>
      </programlisting>
     </informalexample>
    </para>
    &warn.ssl-non-standard;
    &note.sm.uidcheck.dir;
    <simpara>
     Vea tambi&eacute;n <xref linkend="wrappers"/>,
     <function>fclose</function>, <function>fgets</function>,
     <function>fread</function>, <function>fwrite</function>,
     <function>fsockopen</function>, <function>file</function>,
     <function>file_exists</function>,
     <function>is_readable</function>,
     <function>stream_set_timeout</function>, y
     <function>popen</function>.
    </simpara>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
