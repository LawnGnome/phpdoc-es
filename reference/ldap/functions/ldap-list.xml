<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.4 $ -->
<!-- EN-Revision: 1.6 Maintainer: lboshell Status: ready -->
<refentry id="function.ldap-list">
 <refnamediv>
  <refname>ldap_list</refname>
  <refpurpose>Búsqueda de nivel único</refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>resource</type><methodname>ldap_list</methodname>
   <methodparam><type>resource</type><parameter>id_enlace</parameter></methodparam>
   <methodparam><type>string</type><parameter>dn_base</parameter></methodparam>
   <methodparam><type>string</type><parameter>filtro</parameter></methodparam>
   <methodparam choice="opt"><type>array</type><parameter>atributos</parameter></methodparam>
   <methodparam choice="opt"><type>int</type><parameter>solo_atribs</parameter></methodparam>
   <methodparam choice="opt"><type>int</type><parameter>limite_tamanyo</parameter></methodparam>
   <methodparam choice="opt"><type>int</type><parameter>limite_tiempo</parameter></methodparam>
   <methodparam choice="opt"><type>int</type><parameter>deref</parameter></methodparam>
  </methodsynopsis>
  <para>
   Realiza la búsqueda para un <parameter>filtro</parameter> especificado en
   el directorio, con el ámbito <constant>LDAP_SCOPE_ONELEVEL</constant>.
  </para>
  <para>
   <constant>LDAP_SCOPE_ONELEVEL</constant> quiere decir que la búsqueda
   sólo debe devolver información que se encuentre en el nivel
   inmediatamente inferior al <parameter>dn_base</parameter> especificado en
   la llamada. (Equivalente a escribir "ls" y obtener un listado de archivos
   y carpetas en el directorio de trabajo actual.)
  </para>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>id_enlace</parameter></term>
     <listitem>
      <para>
       Un identificador de enlace LDAP, devuelto por
       <function>ldap_connect</function>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>dn_base</parameter></term>
     <listitem>
      <para>
       El DN base para el directorio.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>filtro</parameter></term>
     <listitem>
      <para>
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>atributos</parameter></term>
     <listitem>
      <para>
       Una matriz con los atributos requeridos, p.ej. array("mail", "sn",
       "cn"). Note que "dn" siempre es devuelto independientemente de cuáles
       atributes son requeridos.
      </para>
      <para>
       Usar este parámetro es mucho más eficiente que la acción
       predeterminada (la cual es devolver todos los atributos y sus valores
       asociados). El uso de este parámetro debe por lo tanto considerarse
       una práctica recomendable.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>solo_atribs</parameter></term>
     <listitem>
      <para>
       Debe ser definido a 1 si solo se desean tipos de atributo. Si es
       definido como 0, se recuperan tipos de atributo y valores de
       atributo, lo cual es el comportamiento predeterminado.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>limite_tamanyo</parameter></term>
     <listitem>
      <para>
       Le permite limitar el número de entradas a recuperar. Definir este
       valor como 0 quiere decir sin límite.
      </para>
      <note>
       <para>
        Este parámetro NO puede sobrescribir el límite de tamaño predefinido
        en el lado del servidor. Sin embargo, es posible definirlo como un
        valor más bajo.
       </para>
       <para>
        Algunos servidores de directorios estarán configurados para devolver
        no más de un número predefinido de entradas. Si esto ocurre, el
        servidor indicará que solo ha devuelto un conjunto parcial de
        resultados. Esto ocurre también si usa este parámetro para limitar
        el número de entradas recuperadas.
       </para>
      </note>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>limite_tiempo</parameter></term>
     <listitem>
      <para>
       Define el número de segundos a esperar en la búsqueda. Definir este
       valor como 0 quiere decir sin límite.
      </para>
      <note>
       <para>
        Este parámetro NO puede sobrescribir el límite de tiempo predefinido
        en el lado del servidor. Sin embargo, es posible definirlo como un
        valor más bajo.
       </para>
      </note>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>deref</parameter></term>
     <listitem>
      <para>
       Especifica el modo en que deben manejarse los alias durante la
       búsqueda. Puede ser uno de los siguientes valores:
       <itemizedlist>
        <listitem>
         <simpara>
          <constant>LDAP_DEREF_NEVER</constant> - (predeterminado) los alias
          nunca son dereferenciados.
         </simpara>
        </listitem>
        <listitem>
         <simpara>
          <constant>LDAP_DEREF_SEARCHING</constant> - los alias deben ser
          dereferenciados durante la búsqueda pero no cuando se ubica el
          objeto base de la búsqueda.
         </simpara>
        </listitem>
        <listitem>
         <simpara>
          <constant>LDAP_DEREF_FINDING</constant> - los alias deben ser
          dereferenciados cuando se ubica el objeto base, pero no durante la
          búsqueda.
         </simpara>
        </listitem>
        <listitem>
         <simpara>
          <constant>LDAP_DEREF_ALWAYS</constant> - los alias deben ser
          dereferenciados siempre.
         </simpara>
        </listitem>
       </itemizedlist>
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Devuelve un identificador de resultado de búsqueda, o &false; en caso de
   error.
  </para>
 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <para>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>&Version;</entry>
       <entry>&Description;</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>4.0.5</entry>
       <entry>
        Se agregó el soporte para búsquedas paralelas. Vea
        <function>ldap_search</function> para más detalles.
       </entry>
      </row>
      <row>
       <entry>4.0.2</entry>
       <entry>
        Los parámetros <parameter>solo_atribs</parameter>,
        <parameter>limite_tamanyo</parameter>,
        <parameter>limite_tiempo</parameter> y <parameter>deref</parameter>
        fueron agregados.
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </para>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title>Producir una lista de todas los unidades organizacionales de una
    organización</title>
    <programlisting role="php3">
<![CDATA[
// $ds es un identificador de enlace válido para un servidor de directorios

$dn_base = "o=Mi Compañía, c=ES";
$solo_estos = array("ou");

$sr=ldap_list($ds, $dn_base, "ou=*", $solo_estos);

$info = ldap_get_entries($ds, $sr);

for ($i=0; $i<$info["count"]; $i++) {
    echo $info[$i]["ou"][0] ;
}

]]>
    </programlisting>
   </example>
  </para>
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>ldap_search</function></member>
   </simplelist>
  </para>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
