<?xml version="1.0" encoding="iso-8859-1"?>
<!-- splitted from ./es/functions/ldap.xml, last change in rev 1.1 -->
<!-- last change to 'ldap-search' in en/ tree in rev 1.17 -->
  <refentry id="function.ldap-search">
   <refnamediv>
    <refname>ldap_search</refname>
    <refpurpose>Busca en un arbol LDAP</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripci&oacute;n</title>
     <methodsynopsis>
     <type>int</type><methodname>ldap_search</methodname>
     <methodparam><type>int</type><parameter>identificador_de_conexion</parameter></methodparam>
     <methodparam><type>string</type><parameter>dn_base</parameter></methodparam>
     <methodparam><type>string</type><parameter>filtro</parameter></methodparam>
     <methodparam choice="opt"><type>array</type><parameter>atributos</parameter></methodparam>
     </methodsynopsis>
    <para>
     Devuelve un identificador de resultado de b&uacute;squeda o falso en caso de error.</para>
    <para>  
     <function>ldap_search</function> realiza la b&uacute;squeda seg&uacute;n el filtro
     especificado con alcance LDAP_SCOPE_SUBTREE. Esto es equivalente a
     buscar en el directorio entero. <parameter>dn_base</parameter>
     especifica el DN base para el directorio.</para>
    <para>
     Existe un cuarto par&aacute;metro opcional que puede ser a&ntilde;adido
     para restringir los atributos y valores devueltos por el
     servidor a s&oacute;lo los requeridos. Es mucho m&aacute;s eficiente que la
     acci&oacute;n por defecto (que devolver&aacute; todos los atributos y sus
     valores asociados). El uso del cuarto par&aacute;metro debe ser por
     tanto considerado una pr&aacute;ctica recomendable.</para>
    <para>
     El cuerto par&aacute;metro es un array est&aacute;ndar de PHP con los atributos
     requeridos, por ejemplo array("email","sn","cn"). Nota: "dn" siempre es
     devuelto independientemente de que tipos de atributos sean
     solicitados.</para>
    <para>
     Tambi&eacute;n es necesario resaltar que algunos servidores de directorio
     est&aacute;n configurados para devolver un cierto n&uacute;mero de entradas como
     m&aacute;ximo. Si esto ocurre, el servidor indicar&aacute; que solo devuelve
     un conjunto de resultados parcial.</para> 
    <para>
     El filtro de b&uacute;squeda puede ser simple o avanzado, usando
     operadores booleanos en el formato descrito en la documentaci&oacute;n
     sobre LDAP (Consulte el <ulink url="&url.ldap.netscape;">Netscape Directory SDK</ulink>
     para obtener completa informaci&oacute;n sobre filtros).</para>
    <para>
     El ejemplo de abajo recupera la unidad organizativa (ou), apellidos
     nombre com&uacute;n y direcci&oacute;n de email para todas las personas de
     "Mi Compa&ntilde;&iacute;a" donde los apellidos o el nombre com&uacute;n contiene la
     subcadena $persona. Este ejemplo usa un filtro booleano para
     indicar al servidor que busque la informaci&oacute;n en m&aacute;s de un atributo.

     <example>
      <title>B&uacute;squeda LDAP</title>
<programlisting role="php">
// $ds es un identificador de conexi&oacute;n v&aacute;lido

// $persona es todo o parte del nombre de una persona, por ejemplo "Pe"

$dn = "o=Mi Compa&ntilde;&iacute;a, c=ES";
$filtro="(|(sn=$persona*)(givenname=$persona*))";
$solonecesito = array( "ou", "sn", "givenname", "mail");

$sr=ldap_search($ds, $dn, $filtro, $solonecesito);

$info = ldap_get_entries($ds, $sr);

print $info["count"]." entradas devueltas&lt;p>";
</programlisting>
      </example></para>

   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
