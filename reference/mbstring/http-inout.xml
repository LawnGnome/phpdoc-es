<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 301112 Maintainer: yago Status: ready -->
<!-- Reviewed: no -->

<chapter xml:id="mbstring.http" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Entrada/Salida HTTP</title>
 <para>
  La conversión de una codificación de caracteres desde una Entrada/Salida HTTP
  también puede utilizar datos binarios. Si se utiliza Entrada/Salida HTTP,
  los usuarios deventrolar la conversión de los datos binarios.
 </para>
 <note>
  <para>
   En PHP 4.3.2 o anterior hay una limitación en esta funcionalidad de
   <literal>mbstring</literal> que consiste en que la conversión de los datos enviados mediante POST
   no funciona si el atributo <literal>enctype</literal> del <literal>formulario</literal>
   es configurado como <literal>multipart/form-data</literal>.
   En este caso es necesario que el usuario convierta los datos por sí mismo si es necesario.
  </para>
  <para>
   Comenzando con PHP 4.3.3, si el atributo <literal>enctype</literal> de un formulario HTML es configurado a
   <literal>multipart/form-data</literal> y <literal>mbstring.encoding_translation</literal> es configurado a On
   en el &php.ini; las variables y los nombres de los ficheros pasados mediante POST se convertirán a la codificación
   de caracteres interna.
   Sin embargo, la conversión no se aplicará a las consultas.
  </para>
 </note>
 <para>
  <itemizedlist>
   <listitem>
    <simpara>
     Entrada HTTP
    </simpara>
    <para> 
     No hay ninguna forma de controlar la conversión de caracteres 
     mediante Entrada HTTP desde un script PHP. Para desactivar la 
     conversión de caracteres mediante Entrada HTTP, hay que configurarlo 
     en el fichero de configuración &php.ini;.
     <example>
      <title>
       Desactivar la conversión de caracteres mediante Entrada HTTP de &php.ini;
      </title>
      <programlisting role="php.ini">
<![CDATA[
;; Disable HTTP Input conversion
mbstring.http_input = pass
;; Disable HTTP Input conversion (PHP 4.3.0 or higher)
mbstring.encoding_translation = Off
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Cuando se utiliza PHP como un módulo de Apache, es posible sobrecargar
     esta configuración en cada directiva de Host Virtual en el archivo
     &httpd.conf; o por directorio, a través de un archivo &htaccess;. Ver más detalles en la sección de
     <link linkend="configuration">Configuración</link> y en el Manual de Apache.
    </para>
   </listitem>
   <listitem>
    <simpara>
     Salida HTTP
    </simpara>
    <para>
     Hay varios caminos para habilitar la conversión de caracteres de salida.
     Una es utilizando el archivo de configuración &php.ini;, otra es
     utilizando <function>ob_start</function> con
     <function>mb_output_handler</function> mediante la función de retrollamada (callback)
     <literal>ob_start</literal>.
    </para>
   </listitem>
  </itemizedlist>
 </para>
 <para>
  <example>
   <title>Configuración de ejemplo de &php.ini;</title>
   <programlisting>
<![CDATA[
;; Enable output character encoding conversion for all PHP pages

;; Enable Output Buffering
output_buffering    = On

;; Set mb_output_handler to enable output conversion
output_handler      = mb_output_handler
]]>
   </programlisting>
  </example>
 </para>
 <para>
  <example>
   <title>Script example</title>
   <programlisting role="php">
<![CDATA[
<?php

// Enable output character encoding conversion only for this page

// Set HTTP output character encoding to SJIS
mb_http_output('SJIS');

// Start buffering and specify "mb_output_handler" as
// callback function
ob_start('mb_output_handler');

?>
]]>
   </programlisting>
  </example>
 </para>
</chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

