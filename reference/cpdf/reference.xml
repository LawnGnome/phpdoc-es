<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.13 $ -->
<!-- EN-Revision: 1.18 Maintainer: lboshell Status: ready -->
<!-- Purpose: utilspec.nontext -->
<!-- Membership: pecl, external -->

 <reference xml:id="ref.cpdf" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Funciones ClibPDF [obsoletas]</title>
  <titleabbrev>ClibPDF</titleabbrev>

  <partintro>
   <section xml:id="cpdf.intro">
    &reftitle.intro;
    <warning>
     <para>
      El soporte de ClibPDF ha sido abandonado y se recomienda a los
      usuarios el uso de una alternativa, como <link
      linkend="ref.haru">Haru</link>, <link linkend="ref.pdf">PDFlib</link>,
      o una de las <link linkend="faq.using.freepdf">alternativas PHP</link>
      disponibles.
     </para>
    </warning>
    <para>
     ClibPDF le permite crear documentos PDF con PHP. La funcionalidad y la
     interfaz de programación de ClibPDF son similares a <link
     linkend="ref.pdf">PDFlib</link>. Esta documentación debería ser leída
     junto con el manual de ClibPDF, ya que éste explica la biblioteca con
     mucho mayor detalle.
    </para>
    <para>
     Muchas funciones en la biblioteca ClibPDF nativa y el módulo PHP, así
     como en <link linkend="ref.pdf">PDFlib</link>, tienen el mismo nombre.
     Todas las funciones excepto por <function>cpdf_open</function> reciben
     el gestor del documento como su primer parámetro.
    </para>
    <para>
     Actualmente este gestor no es usado internamente ya que ClibPDF no
     soporta la creación de varios documentos PDF a la vez. De hecho, no
     debería intentarlo siquiera, los resultados son impredecibles. Es
     difícil hacerse una idea de las consecuencias que representaría en un
     entorno multi-hilos. De acuerdo al autor de ClibPDF, esto cambiará en
     uno de los lanzamientos siguientes (la versión actual cuando se
     escribieron estas líneas es 1.10). Si necesita esta funcionalidad, use
     el módulo pdflib.
    </para>
    <para>
     Una característica interesante de ClibPDF (y <link
     linkend="ref.pdf">PDFlib</link>) es la habilidad de crear el documento
     pdf completamente en memoria sin usar archivos temporales. También
     provee la habilidad de pasar coordenadas en una unidad de longitud
     predefinida. (Esta característica puede ser simulada también por
     <function>pdf_translate</function> cuando se usan las funciones <link
     linkend="ref.pdf">PDFlib</link>.)
    </para>
    <para>
     Otra característica interesante de ClibPDF es el hecho de que cualquier
     página puede ser modificada en cualquier momento, incluso si una nueva
     página ya ha sido abierta. La función
     <function>cpdf_set_current_page</function> permite abandonar la página
     actual y posiblemente modificar otra página.
    </para>
    <para>
     La mayoría de funciones son razonablemente fáciles de usar. La parte
     más difícil es probablemente la creación misma de un documento PDF muy
     sencillo. El ejemplo presentado a continuación debería ayudarlo a
     iniciar. En éste se crea un documento con una página. La página
     contiene el texto "Times-Roman" en una fuente tipográfica de borde
     exterior y 30pt. El texto es subrayado.
    </para>
    <note>
     <para>
      &pecl.moved-ver;5.1.0.
     </para>
    </note>
    <note>
     <simpara>
      Si está interesado en generadores de PDF gratuitos alternativos que no
      usen bibliotecas PDF externas, vea <link
      linkend="faq.using.freepdf">este FAQ relacionado</link>.
     </simpara>
    </note>
   </section>

   <section xml:id="cpdf.requirements">
    &reftitle.required;
    <para>
     Para poder usar las funciones ClibPDF necesita instalar el paquete
     ClibPDF. Éste se encuentra disponible para su descarga en <link
     xlink:href="&url.fastio;">FastIO</link>, pero requiere que compre una
     licencia para su uso comercial. PHP requiere que usted use cpdflib
     &gt;= 2. El desarrollo de la biblioteca ClibPDF ha sido descontinuado,
     de modo que el sitio web de FastIO probablemente se encuentre
     inaccesible.
    </para>
   </section>

   &reference.cpdf.configure;

   <section xml:id="cpdf.configuration">
    &reftitle.runtime;
    &no.config;
   </section>

   &reference.cpdf.constants;

   <section xml:id="cpdf.examples">
    &reftitle.examples;
    <example>
     <title>Ejemplo Simple de ClibPDF</title>
     <programlisting role="php">
<![CDATA[
<?php
$cpdf = cpdf_open(0);
cpdf_page_init($cpdf, 1, 0, 595, 842, 1.0);
cpdf_add_outline($cpdf, 0, 0, 0, 1, "Pag. 1");
cpdf_begin_text($cpdf);
cpdf_set_font($cpdf, "Times-Roman", 30, "WinAnsiEncoding");
cpdf_set_text_rendering($cpdf, 1);
cpdf_text($cpdf, "Times Roman outlined", 50, 50);
cpdf_end_text($cpdf);
cpdf_moveto($cpdf, 50, 50);
cpdf_lineto($cpdf, 740, 330);
cpdf_stroke($cpdf);
cpdf_finalize_page($cpdf, 1);
cpdf_finalize($cpdf);
Header("Content-type: application/pdf");
cpdf_output_buffer($cpdf);
cpdf_close($cpdf);
?>
]]>
     </programlisting>
    </example>
    <para>
     La distribución de pdflib contiene un ejemplo más complejo que genera
     una serie de páginas con un reloj análogo. Aquí está ese ejemplo
     convertido a PHP usando la extensión ClibPDF:
    </para>
    <example>
     <title>Ejemplo pdfclock tomado de la distribución de pdflib 2.0</title>
     <programlisting role="php">
<![CDATA[
<?php
$radio = 200;
$margen = 20;
$conteo_paginas = 40;

$pdf = cpdf_open(0);
cpdf_set_creator($pdf, "pdf_clock.php");
cpdf_set_title($pdf, "Reloj Análogo");

while ($conteo_paginas-- > 0) {
  cpdf_page_init($pdf, $conteo_paginas+1, 0, 2 * ($radio + $margen), 2 * ($radio + $margen), 1.0);

  cpdf_set_page_animation($pdf, 4, 0.5, 0, 0, 0);  /* limpiar */

  cpdf_translate($pdf, $radio + $margen, $radio + $margen);
  cpdf_save($pdf);
  cpdf_setrgbcolor($pdf, 0.0, 0.0, 1.0);

  /* trazos de los minutos */
  cpdf_setlinewidth($pdf, 2.0);
  for ($alpha = 0; $alpha < 360; $alpha += 6) {
    cpdf_rotate($pdf, 6.0);
    cpdf_moveto($pdf, $radio, 0.0);
    cpdf_lineto($pdf, $radio-$margen/3, 0.0);
    cpdf_stroke($pdf);
  }

  cpdf_restore($pdf);
  cpdf_save($pdf);

  /* trazos de 5 minutos */
  cpdf_setlinewidth($pdf, 3.0);
  for ($alpha = 0; $alpha < 360; $alpha += 30) {
    cpdf_rotate($pdf, 30.0);
    cpdf_moveto($pdf, $radio, 0.0);
    cpdf_lineto($pdf, $radio-$margen, 0.0);
    cpdf_stroke($pdf);
  }

  $ltime = getdate();

  /* dibujar nuestra mano */
  cpdf_save($pdf);
  cpdf_rotate($pdf, -(($ltime['minutes']/60.0) + $ltime['hours'] - 3.0) * 30.0);
  cpdf_moveto($pdf, -$radio/10, -$radio/20);
  cpdf_lineto($pdf, $radio/2, 0.0);
  cpdf_lineto($pdf, -$radio/10, $radio/20);
  cpdf_closepath($pdf);
  cpdf_fill($pdf);
  cpdf_restore($pdf);

  /* dibujar la mano de minutos */
  cpdf_save($pdf);
  cpdf_rotate($pdf, -(($ltime['seconds']/60.0) + $ltime['minutes'] - 15.0) * 6.0);
  cpdf_moveto($pdf, -$radio/10, -$radio/20);
  cpdf_lineto($pdf, $radio * 0.8, 0.0);
  cpdf_lineto($pdf, -$radio/10, $radio/20);
  cpdf_closepath($pdf);
  cpdf_fill($pdf);
  cpdf_restore($pdf);

  /* dibujar la mano de segundos */
  cpdf_setrgbcolor($pdf, 1.0, 0.0, 0.0);
  cpdf_setlinewidth($pdf, 2);
  cpdf_save($pdf);
  cpdf_rotate($pdf, -(($ltime['seconds'] - 15.0) * 6.0));
  cpdf_moveto($pdf, -$radio/5, 0.0);
  cpdf_lineto($pdf, $radio, 0.0);
  cpdf_stroke($pdf);
  cpdf_restore($pdf);

  /* dibujar un pequeño círculo en el centro */
  cpdf_circle($pdf, 0, 0, $radio/30);
  cpdf_fill($pdf);

  cpdf_restore($pdf);

  cpdf_finalize_page($pdf, $conteo_paginas+1);
}

cpdf_finalize($pdf);
Header("Content-type: application/pdf");
cpdf_output_buffer($pdf);
cpdf_close($pdf);
?>
]]>
     </programlisting>
    </example>
   </section>

   <section xml:id="cpdf.seealso">
    &reftitle.seealso;
    <para>
     Vea también la documentación de la extensión <link
     linkend="ref.pdf">PDFlib</link>.
    </para>
   </section>
  </partintro>

&reference.cpdf.functions;

 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
