<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.8 $ -->
<!-- EN-Revision: 1.19 Maintainer: lboshell Status: ready -->
<!-- splitted from ./en/functions/image.xml, last change in rev 1.2 -->
  <refentry id="function.imagettftext">
   <refnamediv>
    <refname>imagettftext</refname>
    <refpurpose>Escribir un texto sobre la imagen usando fuentes
    TrueType</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <methodsynopsis>
     <type>array</type><methodname>imagettftext</methodname>
     <methodparam><type>resource</type><parameter>imagen</parameter></methodparam>
     <methodparam><type>float</type><parameter>tamanyo</parameter></methodparam>
     <methodparam><type>float</type><parameter>angulo</parameter></methodparam>
     <methodparam><type>int</type><parameter>x</parameter></methodparam>
     <methodparam><type>int</type><parameter>y</parameter></methodparam>
     <methodparam><type>int</type><parameter>color</parameter></methodparam>
     <methodparam><type>string</type><parameter>archivo_fuente</parameter></methodparam>
     <methodparam><type>string</type><parameter>texto</parameter></methodparam>
    </methodsynopsis>
    <para>
     <variablelist>
      <varlistentry>
       <term><parameter>imagen</parameter></term>
       <listitem>
        <simpara>
         El recurso de imagen. Vea
         <function>imagecreatetruecolor</function>.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>tamanyo</parameter></term>
       <listitem>
        <simpara>
         El tamaño de la fuente. Dependiendo de su versión de GD, éste
         puede ser especificado como el tamaño en píxeles (GD1), o el
         tamaño en puntos (GD2).
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>angulo</parameter></term>
       <listitem>
        <simpara>
         El ángulo en grados, en donde 0 grados significa texto de
         lectura de izquierda-a-derecha. Valores más altos representan
         una rotación en sentido contrario al de las manecillas del
         reloj. Por ejemplo, un valor de 90 resulta en texto de
         lectura de abajo-hacia-arriba.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>x</parameter></term>
       <listitem>
        <simpara>
         Las coordenadas dadas por <parameter>x</parameter> y
         <parameter>y</parameter> definirán el punto base del primer
         caracter (a grandes rasgos la esquina inferior izquierda del
         caracter). Esto a diferencia de
         <function>imagestring</function>, en donde
         <parameter>x</parameter> y <parameter>y</parameter> definen
         la esquina superior izquierda del primer caracter. Por
         ejemplo, "arriba a la izquierda" es 0, 0.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>y</parameter></term>
       <listitem>
        <simpara>
         La coordenada y. Ésta establece la posición de la línea base
         de las fuentes, no la parte más baja del caracter.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>color</parameter></term>
       <listitem>
        <simpara>
         El índice de color. Usar un índice de color negativo tiene el
         efecto de deshabilitar el anti-alias. Vea
         <function>imagecolorallocate</function>.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>archivo_fuente</parameter></term>
       <listitem>
        <simpara>
         La ruta a la fuente TrueType que desea usar.
        </simpara>
        <simpara>
         Dependiendo de la versión de la biblioteca GD que usa PHP,
         <emphasis>cuando <parameter>archivo_fuente</parameter> no
         comienza con <literal>/</literal> entonces
         <literal>.ttf</literal> se añade</emphasis> al nombre de
         archivo y la biblioteca intentará buscar ese archivo a lo
         largo de una ruta de fuentes definida en la biblioteca.
        </simpara>
        <simpara>
         Cuando se usan versiones de la biblioteca GD inferiores a
         2.0.18, un caracter de <literal>espacio</literal>, en lugar
         de un punto-y-coma, era usado como el 'separador de ruta'
         para diferentes archivos de fuente. El uso no intencionado de
         esta característica resulta en el mensaje de advertencia:
         <literal>Warning: Could not find/open font</literal>. Para
         estas versiones afectadas, la única solución es mover la
         fuente a una ruta que no contenga espacios.
        </simpara>
        <para>
         En muchos casos en los que una fuente reside en el mismo
         directorio que el script que la utiliza, el siguiente truco
         aliviará los problemas de inclusión.
         <programlisting role="php">
<![CDATA[
<?php
// Definir la variable de entorno para GD
putenv('GDFONTPATH=' . realpath('.'));

// Nombre de la fuente a usar (note la falta de la extensión .ttf)
$fuente = 'AlgunaFuente';
?>
]]>
         </programlisting>
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>texto</parameter></term>
       <listitem>
        <simpara>
         La cadena de texto.
        </simpara>
        <simpara>
         Puede incluir referencias numéricas de caracter (de la forma:
         &amp;#8364;) para acceder a caracteres en una fuente más allá
         de la posición 127. El formato hexadecimal (como &amp;#xA9;)
         es soportado a partir de PHP 5.2.0. Es posible pasar cadenas
         en codificación UTF-8 directamente.
        </simpara>
        <simpara>
         Las entidades con nombre, como &amp;copy;, no son
         soportadas. Considere usar
         <function>html_entity_decode</function> para decodificar
         tales entidades a cadenas UTF-8 (html_entity_decode() soporta
         esta aplicación a partir de PHP 5.0.0).
        </simpara>
        <simpara>
         Si un caracter que no es soportado por la fuente es usado en
         la cadena, un rectángulo vacío reemplazará al caracter.
        </simpara>
       </listitem>
      </varlistentry>
     </variablelist>
    </para>
    <para>
     <function>imagettftext</function> devuelve una matriz con 8
     elementos que representan cuatro puntos que forman la caja
     circundante del texto. El orden de los puntos es inferior
     izquierdo, inferior derecho, superior derecho y superior
     izquierdo. Los puntos son relativos al texto independientemente
     del ángulo, así que "superior izquierdo" quiere decir la esquina
     del lado superior izquierdo cuando ve el texto horizontalmente.
    </para>
    <para>
     <example>
      <title>Ejemplo de <function>imagettftext</function></title>
      <para>
       Este script de ejemplo producirá un PNG blanco de 400x30
       pixeles, con las palabras "Probando..." en negro (con sombra
       gris), en la fuente Arial.
      </para>
      <programlisting role="php">
<![CDATA[
<?php
// Establecer el tipo de contenido
header("Content-type: image/png");

// Crear la imagen
$im = imagecreatetruecolor(400, 30);

// Crear algunos colores
$blanco = imagecolorallocate($im, 255, 255, 255);
$gris   = imagecolorallocate($im, 128, 128, 128);
$negro  = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $blanco);

// El texto a pintar
$texto = 'Probando...';
// Reemplaze la ruta con su propio ruta a la fuente
$fuente = 'arial.ttf';

// Agregar una sombra al texto
imagettftext($im, 20, 0, 11, 21, $gris, $fuente, $texto);

// Agregar el texto
imagettftext($im, 20, 0, 10, 20, $negro, $fuente, $texto);

// Usar imagepng() resulta en texto más claro, en comparación con imagejpeg()
imagepng($im);
imagedestroy($im);
?>
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Esta función requiere tanto la biblioteca GD como la biblioteca
     <ulink url="&url.freetype;">FreeType</ulink>.
    </para>
    <para>
     Vea también <function>imagettfbbox</function>.
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
