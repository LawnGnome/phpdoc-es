<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 288721 Maintainer: lboshell Status: ready -->
 <chapter xml:id="faq.installation" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Instalación</title>
  <titleabbrev>Instalación</titleabbrev>

  <para>
   Esta sección contiene preguntas comunes sobre el modo de instalar PHP.
   PHP se encuentra disponible para casi cualquier SO (excepto quizás por
   MacOS antes de OSX), y casi cualquier servidor web.
  </para>
  <para>
   Para instalar PHP, siga las instrucciones en <xref
   linkend="install" />.
  </para>

  <qandaset>
   <qandaentry xml:id="faq.installation.apache2">
    <question>
     <para>
      ¿Porqué no debo usar Apache 2 con un módulo de multi-procesamiento
      (MPM) multi-hilos en un entorno en producción?
     </para>
    </question>
    <answer>
     <para>
      PHP es pegamento. Es el pegamento usado para construir interesantes
      aplicaciones web, uniendo docenas de bibliotecas externas y
      haciéndolas parecer una entidad coherente a través de una interfaz de
      lenguaje intuitiva y fácil de aprender. La flexibilidad y poder de PHP
      depende de la estabilidad y robustez de la plataforma subyacente.
      Necesita de un SO que funcione, un servidor web que funcione y unas
      bibliotecas externas que funcionen para unirlo todo. Cuando uno
      cualquiera de estos elementos deja de trabajar, PHP necesita
      identificar los problemas y solucionarlos rápidamente. Al hacer más
      complejo el marco de referencia base, no disponiendo de hilos de
      ejecución completamente separados, segmentos de memoria completamente
      separados y una caja de arena segura para que cada petición trabaje,
      se introduce una base débil al sistema de PHP.
     </para>
     <para>
      Si siente que necesita usar un MPM multi-hilos, puede echarle un
      vistazo a la configuración FastCGI, en donde PHP corre en su propio
      espacio de memoria.
     </para>
     <para>
      Y finalmente, note que esta advertencia contra el uso de un MPM
      multi-hilos no tiene tanta fuerza en sistemas Windows, ya que la
      mayoría de bibliotecas en esa platafarma tienden a ser seguras en
      entornos multi-hilo.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.phpini">
    <question>
     <para>
      Unix/Windows: ¿En dónde debe estar ubicado mi archivo &php.ini;?
     </para>
    </question>
    <answer>
     <para>
      De forma predeterminada, en Unix debe estar en
      <filename>/usr/local/lib</filename>, lo que es,
      <filename>&lt;ruta-instalacion&gt;/lib</filename>. La mayoría de
      personas querrán modificar este valor en tiempo de compilación con la
      bandera <link
      linkend="configure.with-config-file-path">--with-config-file-path</link>.
      Podría, por ejemplo, definirla como:
      <programlisting role="shell">
--with-config-file-path=/etc
      </programlisting>
      Y luego copiaría <filename>php.ini-dist</filename> desde su
      distribución a <filename>/etc/php.ini</filename> y lo editaría para
      hacer cualquier modificación local que desee.
     </para>
      <programlisting role="shell">
--with-config-file-scan-dir=PATH
      </programlisting>
     <para>
      En windows, la ruta predeterminada para el archivo &php.ini; es el
      directorio de windows. Si está usando el servidor web Apache,
      &php.ini; será buscado primero en el directorio de instalación de
      Apache, p.ej. <filename>c:\program files\apache
      group\apache</filename>. De este modo, puede contar con diferentes
      archivos &php.ini; para diferentes versiones de Apache en la misma
      máquina.
     </para>
     <para>
      Vea también el capítulo sobre el <link
      linkend="configuration.file">archivo de configuración</link>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.nodata">
    <question>
     <para>
      Unix: Instalé PHP, ¡pero cada vez que cargo un documento, recibo el
      mensaje 'Document Contains No Data'!  ¿Qué está pasando aquí?
     </para>
    </question>
    <answer>
     <para>
      Esto probablemente quiere decir que PHP está sufriendo algún tipo de
      dificultad y está produciendo volcados de memoria. Eche un vistazo a
      su registro de errores del servidor para ver si éste es el caso, y
      luego trate de reproducir el problema con un pequeño caso de prueba.
      Si sabe cómo usar 'gdb', es muy útil cuando puede proveer un backtrace
      con su reporte de fallo para ayudar a los desarrolladores a ubicar el
      problema. Si está usando PHP como módulo de Apache, intente algo como:
      <itemizedlist>
       <listitem>
        <para>
         Detener todos sus procesos httpd
        </para>
       </listitem>
       <listitem>
        <para>
         gdb httpd
        </para>
       </listitem>
       <listitem>
        <para>
         Detener todos sus procesos httpd
        </para>
       </listitem>
       <listitem>
        <para>
         &gt; run -X -f /ruta/hacia/httpd.conf
        </para>
       </listitem>
       <listitem>
        <para>
         Luego recuperar la URL que causa el problema con su navegador
        </para>
       </listitem>
       <listitem>
        <para>
         &gt; run -X -f /ruta/hacia/httpd.conf
        </para>
       </listitem>
       <listitem>
        <para>
         Si está recibiendo un volcado de memoria, gdb debe informarle de
         ésto.
        </para>
       </listitem>
       <listitem>
        <para>
         escriba: bt
        </para>
       </listitem>
       <listitem>
        <para>
         Ahora debe incluir su backtrace en su reporte de fallo. Éste debe
         ser enviado desde <link
         xlink:href="&url.php.bugs;">&url.php.bugs;</link>
        </para>
       </listitem>
      </itemizedlist>
     </para>
     <para>
      Si su script usa las funciones de expresiones regulares
      (<function>preg_match</function> y amigas), debe asegurarse de que
      compiló PHP y Apache con el mismo paquete de expresiones regulares.
      Esto debe pasar automáticamente con PHP y Apache 1.3.x
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.processing">
    <question>
     <para>
      Unix: Instalé PHP usando RPMS, ¡pero Apache no está procesando las
      páginas PHP!  ¿Qué está pasando aquí?
     </para>
    </question>
    <answer>
     <para>
      Asumiendo que ha instalado tanto Apache como PHP desde paquetes RPM,
      necesita remover los caracteres de comentario, o agregar algunas o
      todas de las siguientes líneas en su archivo &httpd.conf;:
      <programlisting role="apache-conf">
<![CDATA[
# Módulos Extra
AddModule mod_php.c
AddModule mod_php.c
AddModule mod_perl.c

# Módulos Extra
LoadModule php_module         modules/mod_php.so
LoadModule php5_module        modules/libphp5.so     # para PHP 5
LoadModule perl_module        modules/libperl.so
]]>
      </programlisting>
      Y agregar:
      <programlisting role="apache-conf">
<![CDATA[
AddType application/x-httpd-php .php
]]>
      </programlisting>
      ... a las propiedades globales, o a las propiedades del
      VirtualDomain para el cual desea tener soporte de PHP.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.frontpage">
    <question>
     <para>
      Unix: He aplicado el parche de extensiones FrontPage a Apache, y de
      pronto PHP dejó de funcionar. ¿Es PHP incompatible con las extensiones
      FrontPage de Apache?
     </para>
    </question>
    <answer>
     <para>
      No, PHP trabaja bien con las extensiones FrontPage. El problema es que
      el parche de FrontPage modifica varias estructuras de Apache en las
      que depende PHP. Recompilar PHP (usando 'make clean ; make') después
      de que se ha aplicado el parche FP debe solucionar el problema.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.blankscreen">
    <question>
     <para>
      Unix/Windows: He instalado PHP, pero cuando intento acceder a un
      script PHP a través de mi navegador, recibo una pantalla en blanco.
     </para>
    </question>
    <answer>
     <para>
      Seleccione la acción 'ver código fuente' en el navegador web y
      probablemente encontrará el código fuente de su script PHP. Esto
      quiere decir que el servidor web no envió el script a PHP para su
      interpretación. Algo está mal en la configuración del servidor -
      revise cuidadosamente la configuración del servidor con las
      instrucciones de instalación de PHP.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.500error">
    <question>
     <para>
      Unix/Windows: He instalado PHP, pero cuando intento acceder a un
      script PHP a través de mi navegador, recibo un error 500 de servidor.
     </para>
    </question>
    <answer>
     <para>
      Algo falló cuando el servidor intentó ejecutar PHP. Para poder ver un
      mensaje de error más útil, desde la línea de comandos, vaya al
      directorio que contiene el ejecutable PHP
      (<filename>php.exe</filename> en Windows) y ejecute <command>php
      -i</command>. Si PHP tiene algún problema corriendo, entonces se
      desplegará un mensaje de error apropiado, el cual le dará una pista
      sobre lo que debe hacer a continuación. Si recibe una pantalla llena
      de códigos HTML (la salida de la función <function>phpinfo</function>)
      entonces PHP está funcionando, y su problema puede estar relacionado
      con la configuración de su servidor, la cual debe revisar de nuevo.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.undefinedsyms">
    <question>
     <para>
      Algunos sistemas operativos: He instalado PHP sin errores, pero cuando
      intento iniciar apache, recibo errores de símbolos indefinidos:
      <programlisting role="shell">
[mi_maquina:usuario /src/php4] root# apachectl configtest
 apachectl: /usr/local/apache/bin/httpd Undefined symbols:
  _compress
  _uncompress
      </programlisting>
     </para>
    </question>
    <answer>
     <para>
      Esto no tiene nada que ver con PHP en realidad, sino con las
      bibliotecas de cliente de MySQL. Algunas necesitan <option
      role="configure">--with-zlib</option>, otras no. Este tema también se
      cubre en el FAQ sobre MySQL.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.cgierror">
    <question>
     <para>
      Windows: He instalado PHP, pero cuando intento acceder a un script PHP
      a través de mi navegador, recibo el error:
      <screen>
cgi error:
 The specified CGI application misbehaved by not
 returning a complete set of HTTP headers.
 The headers it did return are:
      </screen>
     </para>
    </question>
    <answer>
     <para>
      El mensaje de error significa que PHP falló en su intento de producir
      una salida. Para poder ver un mensaje de error más útil, desde la
      línea de comandos, vaya al directorio que contiene el ejecutable de
      PHP (<filename>php.exe</filename> en Windows) y ejecute <command>php
      -i</command>. Si PHP tiene algún problema ejecutándose, entonces se
      desplegará un mensaje de error apropiado, el cual le dará una pista
      sobre lo que necesita hacer a continuación. Si recibe una pantalla
      llena de códigos HTML (la salida de la función
      <function>phpinfo</function>) entonces PHP está funcionando.
     </para>
     <para>
      Una vez PHP esté trabajando desde la línea de comandos, intente
      acceder al script desde el navegador nuevamente. Si aun falla,
      entonces la causa puede ser alguna de las siguientes:
     </para>
     <itemizedlist>
      <listitem>
       <simpara>
        Los permisos de archivo en su script PHP,
        <filename>php.exe</filename>, <filename>php4ts.dll</filename>,
        &php.ini; o cualquier extensión PHP que esté tratando cargar son de
        tal forma que el usuario anónimo de internet
        <literal>ISUR_&lt;nombre_maquina&gt;</literal> no tiene acceso a
        estos recursos.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        El archivo del script no existe (o posiblemente no se encuentra en
        donde cree que está, relativo a su directorio web raíz). Note que
        para IIS, puede atrapar este error seleccionando la caja 'check file
        exists' cuando esté configurando la gestión de scripts bajo Internet
        Services Manager. Si un archivo de script no existe, entonces el
        servidor devolverán un error 404 en su lugar. También existe el
        beneficio adicional de que IIS se encargará de cualquier
        autenticación requerida por usted, basado en los permisos NTLanMan
        en su archivo de script.
       </simpara>
      </listitem>
     </itemizedlist>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.phpandiis">
    <question>
     <para>
      Windows: He seguido todas las instrucciones, ¡pero aun no logro que
      PHP e IIS trabajen juntos!
     </para>
    </question>
    <answer>
     <para>
      ¡Asegúrese de que cualquier usuario que necesite ejecutar un script
      PHP tenga los permisos para ejecutar <filename>php.exe</filename>! IIS
      usa un usuario anónimo que es agregado al momento de instalar IIS.
      Este usuario necesita privilegios sobre <filename>php.exe</filename>.
      También, cualquier usuario autenticado necesitará permisos para
      ejecutar <filename>php.exe</filename>. Y para IIS4, necesita decirle
      que PHP es un motor de scripts. Asimismo, querrá leer <link
      linkend="faq.installation.forceredirect">este faq</link>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.forceredirect">
    <question>
     <para>
      Cuando corro PHP como CGI con IIS, PWS, OmniHTTPD o Xitami,
      recibo el siguiente error: <literal>Security Alert! PHP CGI
      cannot be accessed directly.</literal>.
     </para>
    </question>
    <answer>
     <para>
      Debe definir la directiva <link
      linkend="ini.cgi.force-redirect">cgi.force_redirect</link> como
      <literal>0</literal>. Su valor predeterminado es <literal>1</literal>,
      así que asegúrese de que la directiva no se encuentre comentada (con
      un <literal>;</literal>). Como todas las directivas, ésta se define en
      &php.ini;
     </para>
     <para>
      Debido a que su valor predeterminado es <literal>1</literal>, es
      importante que esté 100% seguro de que el archivo &php.ini; correcto
      está siendo leído. Lea <link
      linkend="faq.installation.findphpini">este faq</link> para más
      detalles.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.findphpini">
    <question>
     <para>
      ¿Cómo sé si mi &php.ini; está siendo encontrado y leído? Pareciera que
      mis cambios no están siendo implementados.
     </para>
    </question>
    <answer>
     <para>
      Para asegurarse de que su &php.ini; está siendo leído por PHP, haga un
      llamado a <function>phpinfo</function>. Cerca del comienzo, encontrará
      un listado llamado <literal>Configuration File (php.ini)</literal>.
      Éste le dirá en dónde está buscando PHP el archivo &php.ini; y si está
      siendo leído o no. Si sólo existe un directorio PATH, entonces no está
      siendo leído y debe colocar su &php.ini; en ese directorio. Si
      &php.ini; es incluido con la ruta PATH, entonces está siendo leído.
     </para>
     <para>
      Si &php.ini; está siendo leido y está ejecutando PHP como un módulo,
      entonces asegúrese de reiniciar su navegador web después de hacer
      cambios a &php.ini;
     </para>
     <para>
      Vea también <function>php_ini_loaded_file</function>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.addtopath">
    <question>
     <para>
      ¿Cómo agrego mi directorio de PHP a la variable
      <varname>PATH</varname> en Windows?
     </para>
    </question>
    <answer>
     <para>
      En Windows NT, 2000, XP y 2003:
      <itemizedlist>
       <listitem>
        <para>
         Diríjase al Panel de Control y abra el ícono de Sistema (Inicio
         -&gt; Configuraci&oacute;n -&gt; Panel de Control -&gt; Sistema, o
         simplemente Inicio -&gt; Panel de Control -&gt; Sistema en Windows
         XP/2003)
        </para>
       </listitem>
       <listitem><para>
        Vaya a la solapa Avanzado
       </para></listitem>
       <listitem><para>
        Pulse el botón 'Variables de Entorno'
       </para></listitem>
       <listitem><para>
        Consulte el panel de 'Variables de Sistema'
       </para></listitem>
       <listitem><para>
        Encuentre la entrada Path (puede que tenga que desplazarse por
        la lista para encontrarla)
       </para></listitem>
       <listitem><para>
        Haga doble clic sobre la entrada Path
       </para></listitem>
       <listitem>
        <para>
         Ingrese su directorio PHP al final, incluyendo ';' al comienzo
         (p.ej. <literal>;C:\php</literal>)
        </para>
       </listitem>
       <listitem><para>
        Presione Aceptar y reinicie su máquina
       </para></listitem>
      </itemizedlist>
     </para>
     <para>
      En Windows 98/Me necesita editar el archivo
      <filename>autoexec.bat</filename>:
      <itemizedlist>
       <listitem><para>
        Abra el Bloc de Notas (Inicio -&gt; Ejecutar y escriba notepad)
       </para></listitem>
       <listitem><para>
        Abra el archivo <filename>C:\autoexec.bat</filename>
       </para></listitem>
       <listitem>
        <para>
         Ubique la línea con PATH=C:\WINDOWS;C:\WINDOWS\COMMAND;..... y
         agregue: <literal>;C:\php</literal> al final de la línea
        </para>
       </listitem>
       <listitem><para>
        Guarde el archivo y reinicie su máquina
       </para></listitem>
      </itemizedlist>
     </para>
     <note>
      <simpara>
       Asegúrese de reiniciar después de seguir los anteriores pasos para
       asegurarse de que los cambias a <varname>PATH</varname> sean
       aplicados.
      </simpara>
     </note>
     <para>
      El manual de PHP solía promover la copia de archivos al directorio
      system de Windows, esto es porque el directorio
      (<filename>C:\Windows</filename>, <filename>C:\WINNT</filename>, etc.)
      se encuentra por defecto en el valor PATH del sistema. Copiar archivos
      en el directorio system de Windows se considera obsoleto desde hace
      bastante tiempo, y puede causar problemas.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.phprc">
    <question>
     <para>
      ¿Cómo hago que el archivo &php.ini; se encuentre disponible para PHP
      en windows?
     </para>
    </question>
    <answer>
     <para>
      Existen varias formas de lograr esto. Si está usando Apache, lea sus
      instrucciones específicas de instalación (<link
      linkend="install.windows.apache1">Apache 1</link>, <link
      linkend="install.windows.apache2">Apache 2</link>), o de lo contrario
      debe definir la variable de entorno <varname>PHPRC</varname>:
     </para>
     <para>
      En Windows NT, 2000, XP y 2003:
      <itemizedlist>
       <listitem><para>
        Diríjase al Panel de Control y abra el ícono de Sistema (Inicio
        -&gt; Configuración -&gt; Panel de Control -&gt; Sistema, o
        simplemente Inicio -&gt; Panel de Control -&gt; Sistema para Windows
        XP/2003)
       </para></listitem>
       <listitem><para>
        Vaya a la solapa de Avanzado
       </para></listitem>
       <listitem><para>
        Pulse sobre el botón 'Variables de Entorno'
       </para></listitem>
       <listitem><para>
        Consulte el panel de 'Variables de sistema'
       </para></listitem>
       <listitem><para>
        Pulse sobre 'Nueva' e ingrese 'PHPRC' como el nombre de variable y
        el directorio en donde se encuentra &php.ini; como el valor de la
        variable (p.ej. <literal>C:\php</literal>)
       </para></listitem>
       <listitem><para>
        Pulse aceptar y reinicie su máquina
       </para></listitem>
      </itemizedlist>
     </para>
     <para>
      En Windows 98/Me necesita editar el archivo
      <filename>autoexec.bat</filename>:
      <itemizedlist>
       <listitem><para>
        Abra el Bloc de Notas (Inicio -&gt; Ejecutar e
        ingrese notepad)
       </para></listitem>
       <listitem><para>
        Abra el archivo <filename>C:\autoexec.bat</filename>
       </para></listitem>
       <listitem><para>
        Agrege una nueva línea al final del archivo: <literal>set
        PHPRC=C:\php</literal> (reemplace <literal>C:\php</literal> con el
        directorio en donde se encuentra &php.ini;). Por favor note que la
        ruta no puede contener espacios. Por ejemplo si tiene instalado PHP
        en <filename>C:\Archivos de Programa\PHP</filename>, usted debería
        ingresar <filename>C:\ARCHIV~1\PHP</filename> en su lugar.
       </para></listitem>
       <listitem><para>
        Guarde el archivo y reinicie su máquina
       </para></listitem>
      </itemizedlist>
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.apache.multiviews">
    <question>
     <para>
      ¿Es posible usar la negociación de contenido de Apache (opción
      MultiViews) con PHP?
     </para>
    </question>
    <answer>
     <para>
      Si los enlaces a archivos PHP incluyen la extensión, todo trabaja
      perfectamente. Este FAQ es sólo para el caso en el que los enlaces a
      archivos PHP no incluyen la extensión y se desea usar la negociación
      de contenido para elegir archivos PHP de una URL sin extensión. En
      este caso reemplace la línea <literal>AddType application/x-httpd-php
      .php</literal> con:
      <programlisting role="apache-conf">
<![CDATA[
# PHP 4
AddHandler php-script php
AddType text/html php

# PHP 5
AddHandler php5-script php
AddType text/html php
]]>
      </programlisting>
      Esta solución no funciona con Apache 1 ya que el módulo PHP no atrapa
      <literal>php-script</literal>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.installation.requestmethods">
    <question>
     <para>
      ¿PHP se limita a procesar los métodos de petición GET y POST
      solamente?
     </para>
    </question>
    <answer>
     <para>
      No, es posible manejar cualquier método de petición, p.ej. CONNECT. La
      respuesta de status apropiada puede ser enviada con
      <function>header</function>. Si solo los métodos GET y POST debieran
      ser manejados, puede conseguirse con esta configuración de Apache:
      <programlisting role="apache-conf">
<![CDATA[
<LimitExcept GET POST>
Deny from all
</LimitExcept>
]]>
     </programlisting>
     </para>
    </answer>
   </qandaentry>

  </qandaset>
 </chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
