<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.6 $ -->
<!-- EN-Revision: 1.27 Maintainer: lboshell Status: ready -->
 <chapter id="faq.installation">
  <title>Instalaci&oacute;n</title>
  <titleabbrev>Instalaci&oacute;n</titleabbrev>

  <para>
   Esta secci&oacute;n contiene preguntas comunes sobre el modo de
   instalar PHP. PHP se encuentra disponible para casi cualquier SO
   (excepto quiz&aacute;s por MacOS antes de OSX), y casi cualquier
   servidor web.
  </para>
  <para>
   Para instalar PHP, siga las instrucciones del archivo <ulink
   url="&url.file.installation;">INSTALL</ulink> ubicado en la
   distribuci&oacute;n. Los usuarios de windows tambi&eacute;n
   deber&iacute;an leer el archivo <ulink
   url="&url.file.readmewin;">install.txt</ulink>. Tambi&eacute;n
   existen algunas pistas &uacute;tiles para usuarios de windows <link
   linkend="install.windows">aqu&iacute;</link>.
  </para>

  <qandaset>
   <qandaentry id="faq.installation.phpini">
    <question>
     <para>
      Unix/Windows: &iquest;En d&oacute;nde debe estar ubicado mi
      archivo &php.ini;?
     </para>
    </question>
    <answer>
     <para>
      Por defecto, en Unix debe estar
      en <filename>/usr/local/lib</filename>, lo que
      es, <filename>&lt;ruta-instalacion&gt;/lib</filename>. La
      mayor&iacute;a de personas querr&aacute;n modificar &eacute;ste
      valor en tiempo de compilaci&oacute;n con la bandera <link
      linkend="install.configure.with-config-file-path">--with-config-file-path</link>.
      Podr&iacute;a, por ejemplo, definirla como:
      <programlisting role="shell">
--with-config-file-path=/etc
      </programlisting>
      Y luego copiar&iacute;a <filename>php.ini-dist</filename> desde
      su distribuci&oacute;n a <filename>/etc/php.ini</filename> y lo
      editar&iacute;a para hacer cualquier modificaci&oacute;n local
      que desee.
     </para>
      <programlisting role="shell">
--with-config-file-scan-dir=PATH 
      </programlisting>
     <para>
      En windows, la ruta predeterminada para el archivo &php.ini; es
      el directorio de windows. Si est&aacute; usando el servidor web
      Apache, &php.ini; ser&aacute; buscado primero en el directorio
      de instalaci&oacute;n de Apache, p.ej. <filename>c:\program
      files\apache group\apache</filename>. De este modo, puede contar
      con diferentes archivos &php.ini; para diferentes versiones de
      Apache en la misma m&aacute;quina.
     </para>
     <para>
      Vea tambi&eacute;n el cap&iacute;tulo sobre el <link
      linkend="configuration.file">archivo de
      configuraci&oacute;n</link>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.nodata">
    <question>
     <para>
      Unix: Instal&eacute; PHP, &iexcl;pero cada vez que cargo un
      documento, recibo el mensaje 'Document Contains No Data'!
      &iquest;Qu&eacute; est&aacute; pasando aqu&iacute;?
     </para>
    </question>
    <answer>
     <para>
      Esto probablemente quiere decir que PHP est&aacute; sufriendo
      alg&uacute;n tipo de dificultad y est&aacute; produciendo
      volcados de memoria. Eche un vistazo a su registro de errores
      del servidor para ver si &eacute;ste es el caso, y luego trate
      de reproducir el problema con un peque&ntilde;o caso de
      prueba. Si sabe c&oacute;mo usar 'gdb', es muy &uacute;til
      cuando puede proveer un backtrace con su reporte de fallo para
      ayudar a los desarrolladores a ubicar el problema. Si
      est&aacute; usando PHP como m&oacute;dulo de Apache, intente
      algo como:
      <itemizedlist>
       <listitem>
        <para>
         Detener todos sus procesos httpd
        </para>
       </listitem>
       <listitem>
        <para>
         gdb httpd
        </para>
       </listitem>
       <listitem>
        <para>
         Detener todos sus procesos httpd
        </para>
       </listitem>
       <listitem>
        <para>
         &gt; run -X -f /ruta/hacia/httpd.conf
        </para>
       </listitem>
       <listitem>
        <para>
         Luego recuperar la URL que causa el problema con su navegador
        </para>
       </listitem>      
       <listitem>
        <para>
         &gt; run -X -f /ruta/hacia/httpd.conf
        </para>
       </listitem>      
       <listitem>
        <para>
         Si est&aacute; recibiendo un volcado de memoria, gdb debe
         informarle de &eacute;sto.
        </para>
       </listitem>      
       <listitem>
        <para>
         escriba: bt
        </para>
       </listitem>
       <listitem>
        <para>
         Ahora debe incluir su backtrace en su reporte de
         fallo. &Eacute;ste debe ser enviado desde <ulink
         url="&url.php.bugs;">&url.php.bugs;</ulink>
        </para>
       </listitem>
      </itemizedlist>
     </para>
     <para>
      Si su script usa las funciones de expresiones regulares
      (<function>ereg</function> y amigas), debe asegurarse de que
      compil&oacute; PHP y Apache con el mismo paquete de expresiones
      regulares. Esto debe pasar autom&aacute;ticamente con PHP y
      Apache 1.3.x
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.processing">
    <question>
     <para>
      Unix: Instal&eacute; PHP usando RPMS, &iexcl;pero Apache no
      est&aacute; procesando las p&aacute;ginas PHP&iexcl;
      &iquest;Qu&eacute; est&aacute; pasando aqu&iacute;?
     </para>
    </question>
    <answer>
     <para>
      Asumiendo que ha instalado tanto Apache como PHP desde paquetes
      RPM, necesita remover los caracteres de comentario, o agregar
      algunas o todas de las siguientes l&iacute;neas en su archivo
      &httpd.conf;:
      <programlisting role="apache-conf">
<![CDATA[
# Modulos Extra
AddModule mod_php.c
AddModule mod_php3.c
AddModule mod_perl.c

# Modulos Extra
LoadModule php_module         modules/mod_php.so
LoadModule php3_module        modules/libphp3.so     # para PHP 3
LoadModule php4_module        modules/libphp4.so     # para PHP 4
LoadModule perl_module        modules/libperl.so
]]>
      </programlisting>
      Y agregar:
      <programlisting role="apache-conf">
<![CDATA[
AddType application/x-httpd-php3 .php3    # para PHP 3
AddType application/x-httpd-php .php      # para PHP 4
]]>
      </programlisting>
      ... a las propiedades globales, o a las propiedades del
      VirtualDomain para el cual desea tener soporte de PHP.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.compile">
    <question>
     <para>
      Unix: Instal&eacute; PHP 3 usando RPMS, &iexcl;pero no compila
      con el soporte de bases de datos que necesito!
      &iquest;Qu&eacute; est&aacute; pasando?
     </para>
    </question>
    <answer>
     <para>
      Debido a la forma en que se compila PHP 3, no es sencillo crear
      un RPM de PHP flexible completo. Este problema es atendido en
      PHP 4. Para PHP 3, actualmente le sugerimos que use el mecanismo
      descrito en el archivo INSTALL.REDHAT en la distribuci&oacute;n
      de PHP. Si insiste en usar una versi&oacute;n RPM para PHP 3,
      contin&uacute;e leyendo...
     </para>
     <para>
      Los empaquetadores de RPM est&aacute;n configurando los RPMS
      para ser instalados sin soporte de bases de datos para
      simplificar las instalaciones <emphasis>y</emphasis> porque los
      RPMS usan /usr/ en lugar del directorio /usr/local/
      est&aacute;ndar para los archivos. Usted necesita decirle al
      archivo spec del RPM cu&aacute;les bases de datos soportar y la
      ubicaci&oacute;n del nivel m&aacute;s alto de su servidor de
      bases de datos.
     </para>
     <para>
      Este ejemplo explicar&aacute; el proceso de agregar soporte para
      el popular servidor de bases de datos MySQL, usando la
      instalaci&oacute;n de m&oacute;dulo para Apache.
     </para>
     <para>
      Por supuesto, toda esta informaci&oacute;n puede ser ajustada
      para cualquier servidor de bases de datos soportada por
      PHP. Asumiremos que ha instalado MySQL y Apache completamente
      con RPMS para este ejemplo tambi&eacute;n.
      <itemizedlist>
       <listitem>
        <para>
         Primero remueva mod_php3 : 
         <programlisting role="shell">
rpm -e mod_php3
         </programlisting>
	      </para>
 	     </listitem>
 	     <listitem>
	      <para>
           Luego obtenga el rpm fuente e INST&Aacute;LELO, NO
           use --rebuild
         <programlisting role="shell">
rpm -Uvh mod_php3-3.0.5-2.src.rpm
         </programlisting>
  	    </para>
 	     </listitem>
 	     <listitem>
	      <para>
	       Luego edite el
	       archivo <filename>/usr/src/redhat/SPECS/mod_php3.spec</filename>
	      </para>
	      <para>
           En la secci&oacute;n %build agrege el soporte de bases de
           datos que desea, y la ruta.
	      </para>
	      <para>
           Para MySQL, usted agregar&iacute;a
         <programlisting role="shell">
--with-mysql=/usr \
         </programlisting>
         La secci&oacute;n %build se ver&aacute; algo como:
         <programlisting role="shell">
	./configure --prefix=/usr \
	--with-apxs=/usr/sbin/apxs \
	--with-config-file-path=/usr/lib \
	--enable-debug=no \
	--enable-safe-mode \
	--with-exec-dir=/usr/bin \
	--with-mysql=/usr \
	--with-system-regex
         </programlisting>
	      </para>
 	     </listitem>
 	     <listitem>
	      <para>
           Una vez est&aacute; hecha esta modificaci&oacute;n, compile
           el rpm binario de este modo:
         <programlisting role="shell">
rpm -bb /usr/src/redhat/SPECS/mod_php3.spec
         </programlisting>
	      </para>
 	     </listitem>
 	     <listitem>
	      <para>
	       Luego instale el rpm
         <programlisting role="shell">
rpm -ivh /usr/src/redhat/RPMS/i386/mod_php3-3.0.5-2.i386.rpm
         </programlisting>
	      </para>
 	     </listitem>
      </itemizedlist>
      Aseg&uacute;rese de reiniciar Apache, y ahora tendr&aacute; PHP
      3 con soporte para MySQL usando RPM's. Note que probablemente es
      mucho m&aacute;s f&aacute;cil simplemente compilar a partir del
      tarball de distribuci&oacute;n de PHP 3 y seguir las
      instrucciones encontradas
      en <filename>INSTALL.REDHAT</filename>.
   	 </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.frontpage">
    <question>
     <para>
      Unix: He aplicado el parche de extensiones FrontPage a Apache, y
      de pronto PHP dej&oacute; de funcionar. &iquest;Es PHP
      incompatible con las extensiones FrontPage de Apache?
     </para>
    </question>
    <answer>
     <para>
      No, PHP trabaja bien con las extensiones FrontPage. El problema
      es que el parche de FrontPage modifica varias estructuras de
      Apache en las que depende PHP. Recompilar PHP (usando 'make
      clean ; make') despu&eacute;s de que se ha aplicado el parche FP
      debe solucionar el problema.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.blankscreen">
    <question>
     <para>
      Unix/Windows: He instalado PHP, pero cuando intento acceder a un
      script PHP a trav&eacute;s de mi navegador, recibo una pantalla
      en blanco.
     </para>
    </question>
    <answer>
     <para>
      Seleccione la acci&oacute;n 'ver c&oacute;digo fuente' en el
      navegador web y probablemente encontrar&aacute; el c&oacute;digo
      fuente de su script PHP. Esto quiere decir que el servidor web
      no envi&oacute; el script a PHP para su
      interpretaci&oacute;n. Algo est&aacute; mal en la
      configuraci&oacute;n del servidor - revise cuidadosamente la
      configuraci&oacute;n del servidor con las instrucciones de
      instalaci&oacute;n de PHP.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.500error">
    <question>
     <para>
      Unix/Windows: He instalado PHP, pero cuando intento acceder a un
      script PHP a trav&eacute;s de mi navegador, recibo un error 500
      de servidor.
     </para>
    </question>
    <answer>
     <para>
      Algo fall&oacute; cuando el servidor intent&oacute; ejecutar
      PHP. Para poder ver un mensaje de error m&aacute;s &uacute;til,
      desde la l&iacute;nea de comandos, vaya al directorio que
      contiene el ejecutable PHP (<filename>php.exe</filename> en
      Windows) y ejecute
      <literal>php -i</literal>. Si PHP tiene alg&uacute;n problema
      corriendo, entonces se desplegar&aacute; un mensaje de error
      apropiado, el cual le dar&aacute; una pista sobre lo que debe
      hacer a continuaci&oacute;n. Si recibe una pantalla llena de
      c&oacute;digos HTML (la salida de la
      funci&oacute;n <function>phpinfo</function>) entonces PHP
      est&aacute; funcionando, y su problema puede estar relacionado
      con la configuraci&oacute;n de su servidor, la cual debe revisar
      de nuevo.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.undefinedsyms">
    <question>
     <para> 
      Algunos sistemas operativos: He instalado PHP sin errores, pero
      cuando intento iniciar apache, recibo errores de s&iacute;mbolos
      indefinidos:
      <programlisting role="shell">
[mi_maquina:usuario /src/php4] root# apachectl configtest
 apachectl: /usr/local/apache/bin/httpd Undefined symbols:
  _compress
  _uncompress
      </programlisting>
     </para>
    </question>
    <answer>
     <para>
      Esto no tiene nada que ver con PHP en realidad, sino con las
      bibliotecas de cliente de MySQL. Algunas necesitan --with-zlib,
      otras no. Esto tema tambi&eacute;n se cubre en el FAQ sobre
      MySQL.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.cgierror">
    <question>
     <para>
      Windows: He instalado PHP, pero cuando intento acceder a un
      script PHP a trav&eacute;s de mi navegador, recibo el error:
      <screen>
cgi error:
 The specified CGI application misbehaved by not
 returning a complete set of HTTP headers.
 The headers it did return are:
      </screen>
     </para>
    </question>
    <answer>
     <para>
      El mensaje de error significa que PHP fall&oacute; en su intento
      de producir una salida. Para poder ver un mensaje de error
      m&aacute;s &uacute;til, desde la l&iacute;nea de comandos, vaya
      al directorio que contiene el ejecutable de PHP
      (<filename>php.exe</filename> en Windows) y ejecute
      <literal>php -i</literal>. Si PHP tiene alg&uacute;n problema
      ejecut&aacute;ndose, entonces se desplegar&aacute; un mensaje de
      error apropiado, el cual le dar&aacute; una pista sobre lo que
      necesita hacer a continuaci&oacute;n. Si recibe una pantalla
      llena de c&oacute;digos HTML (la salida de la
      funci&oacute;n <function>phpinfo</function>) entonces PHP
      est&aacute; funcionando.
     </para>
     <para>
      Una vez PHP est&eacute; trabajando desde la l&iacute;nea de
      comandos, intente acceder al script desde el navegador
      nuevamente. Si aun falla, entonces la causa puede ser alguna de
      las siguientes:
     </para>
     <itemizedlist>
      <listitem>
       <simpara>
        Los permisos de archivo en su script
        PHP, <filename>php.exe</filename>, <filename>php4ts.dll</filename>,
        &php.ini; o cualquier extensi&oacute;n PHP que est&eacute;
        tratando cargar son de tal forma que el usuario an&oacute;nimo
        de internet <literal>ISUR_&lt;nombre_maquina&gt;</literal> no
        tiene acceso a &eacute;stos recursos.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        El archivo del script no existe (o posiblemente no se
        encuentra en donde cree que est&aacute;, relativo a su
        directorio web ra&iacute;z). Note que para IIS, puede atrapar
        este error seleccionando la caja 'check file exists' cuando
        est&eacute; configurando la gesti&oacute;n de scripts bajo
        Internet Services Manager. Si un archivo de script no existe,
        entonces el servidor devolver&aacute;n un error 404 en su
        lugar. Tambi&eacute;n existe el beneficio adicional de que IIS
        se encargar&aacute; de cualquier autenticaci&oacute;n
        requerida por usted, basado en los permisos NTLanMan en su
        archivo de script.
       </simpara>
      </listitem>
     </itemizedlist>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.phpandiis">
    <question>
     <para>
      Windows: He seguido todas las instrucciones, &iexcl;pero aun no
      logro que PHP e IIS trabajen juntos!
     </para>
    </question>
    <answer>
     <para>
      &iexcl;Aseg&uacute;rese de que cualquier usuario que necesite
      ejecutar un script PHP tenga los permisos para
      ejecutar <filename>php.exe</filename>! IIS usa un usuario
      an&oacute;nimo que es agregado al momento de instalar IIS. Este
      usuario necesita privilegios
      sobre <filename>php.exe</filename>. Tambi&eacute;n, cualquier
      usuario autenticado necesitar&aacute; permisos para
      ejecutar <filename>php.exe</filename>. Y para IIS4, necesita
      decirle que PHP es un motor de scripts. Asimismo, querr&aacute;
      leer
      <link linkend="faq.installation.forceredirect">este faq</link>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.forceredirect">
    <question>
     <para>
      Cuando corro PHP como CGI con IIS, PWS, OmniHTTPD o Xitami,
      recibo el siguiente error: <literal>Security Alert! PHP CGI
      cannot be accessed directly.</literal>.
     </para>
    </question>
    <answer>
     <para>
      Debe definir la directiva <link
      linkend="ini.cgi.force-redirect">cgi.force_redirect</link>
      como <literal>0</literal>. Su valor predeterminado
      es <literal>1</literal>, as&iacute; que aseg&uacute;rese de que
      la directiva no se encuentre comentada (con
      un <literal>;</literal>). Como todas las directivas, &eacute;sta
      se define en &php.ini;
     </para>
     <para>
      Debido a que su valor predeterminado es <literal>1</literal>, es
      importante que est&eacute; 100% seguro de que el archivo
      &php.ini; correcto est&aacute; siendo le&iacute;do. Lea <link
      linkend="faq.installation.findphpini">este faq</link> para
      m&aacute;s detalles.
     </para>
    </answer>
   </qandaentry>

   <qandaentry id="faq.installation.findphpini">
    <question>
     <para>
      &iquest;C&oacute;mo se si mi &php.ini; est&aacute; siendo
      encontrado y le&iacute;do? Pareciera que mis cambios no
      est&aacute;n siendo implementados.
     </para>
    </question>
    <answer>
     <para>
      Para asegurarse de que su &php.ini; est&aacute; siendo
      le&iacute;do por PHP, haga un llamado
      a <function>phpinfo</function>, y cerca del comienzo
      encontrar&aacute; un listado llamado <literal>Configuration File
      (php.ini)</literal>. &Eacute;ste le dir&aacute; en d&oacute;nde
      est&aacute; buscando PHP el archivo &php.ini; y si est&aacute;
      siendo le&iacute;do o no. Si s&oacute;lo existe un directorio
      PATH, entonces no est&aacute; siendo le&iacute;do y debe colocar
      su &php.ini; en ese directorio. Si &php.ini; es incluido con la
      ruta PATH, entonces est&aacute; siendo le&iacute;do.
     </para>
     <para>
      Si &php.ini; est&aacute; siendo leido y est&aacute; ejecutando
      PHP como un m&oacute;dulo, entonces aseg&uacute;rese de
      reiniciar su navegador web despu&eacute;s de hacer cambios a
      &php.ini;
     </para>
    </answer>
   </qandaentry>
  </qandaset>
 </chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
