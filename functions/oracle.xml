 <reference id="ref.oracle">
  <title>Funciones Oracle</title>
  <titleabbrev>Oracle</titleabbrev>

  <refentry id="function.ora-bind">
   <refnamediv>
    <refname>Ora_Bind</refname>
    <refpurpose>Vincula una variable PHP a un parámetro Oracle</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_bind</function></funcdef>
     <paramdef>int <parameter>cursor</parameter></paramdef>
     <paramdef>string <parameter>nombre de variable PHP</parameter></paramdef>
     <paramdef>string <parameter>nombre de parámetro SQL</parameter></paramdef>
     <paramdef>int <parameter>longitud</parameter></paramdef>
     <paramdef>int <parameter><optional>tipo</optional></parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve verdadero si el vínculo se realiza con éxito, y sino devuelve falso.  Los detalles
     de los errores pueden examinarse usando la funciones <function>ora_error</function> y
     <function>ora_errorcode</function>.</para>

    <para>
     Esta función liga la variable PHP nombrada con el parámetro SQL.
     El parámtro SQL debe estar en la forma ":name".  Con el parámetro
     optativo tipo, se define si el parámetro SQL se trata de un parámetro
     de entrada/salida (0 y por defecto), entrada (1) o salida (2).  Como en PHP
     3.0.1, se puede usar las constantes ORA_BIND_INOUT, ORA_BIND_IN y
     ORA_BIND_OUT en lugar de los números.</para>
 
    <para>
     ora_bind debe ser llamada después de <function>ora_parse</function> y
     antes de <function>ora_exec</function>. Los valores de entrada pueden pasarse por
     asignación a las variables PHP vinculadas, despues de la llamada a
     <function>ora_exec</function> dichas variables contendrán los valores de salida, si
     éstos estuvieran disponibles.

<informalexample>
      <programlisting role="php">
&lt;?php
ora_parse($curs, "declare tmp INTEGER; begin tmp := :in; :out := tmp; :x := 7.77; end;");
ora_bind($curs, "result", ":x", $len, 2);
ora_bind($curs, "input", ":in", 5, 1);
ora_bind($curs, "output", ":out", 5, 2);
$input = 765;
ora_exec($curs);
echo "Result: $result&lt;BR>Out: $output&lt;BR>In: $input";
?>
</programlisting>
     </informalexample></para>

   </refsect1>
  </refentry>

  <refentry id="function.ora-close">
   <refnamediv>
    <refname>Ora_Close</refname>
    <refpurpose>Cierra un cursor Oracle</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_close</function></funcdef>
     <paramdef>int <parameter>cursor</parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve verdadero si el cierre fué exitoso, o falso de lo contrario.  Los detalles de los
     errores se recuperan usando las funciones
     <function>ora_error</function> y
     <function>ora_errorcode</function>.</para>

    <para>
     Esta función cierra un cursor de datos abierto con
     <function>ora_open</function>.</para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-columnname">
   <refnamediv>
    <refname>Ora_ColumnName</refname>
    <refpurpose>toma el nombre de una columna de resultados Oracle</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>string <function>Ora_ColumnName</function></funcdef>
     <paramdef>int <parameter>cursor</parameter></paramdef>
     <paramdef>int <parameter>column</parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve el nomre de un campo/columna
     <parameter>column</parameter> en el cursor
     <parameter>cursor</parameter>.  el nombre devuelto estará en letras mayúsculas.</para>
   </refsect1>
  </refentry>


  <refentry id="function.ora-columntype">
   <refnamediv>
    <refname>Ora_ColumnType</refname>
    <refpurpose>toma el tipo de una columna de resultados Oracle</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>string <function>Ora_ColumnType</function></funcdef>
     <paramdef>int <parameter>cursor</parameter></paramdef>
     <paramdef>int <parameter>column</parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve el nombre del tipo de datos del campo o columna
     <parameter>column</parameter> en el cursor
     <parameter>cursor</parameter>.  Se devolverá un tipo de datos, de entre los siguientes:
     <simplelist>
      <member><literal>"VARCHAR2"</literal></member>
      <member><literal>"VARCHAR"</literal></member>
      <member><literal>"CHAR"</literal></member>
      <member><literal>"NUMBER"</literal></member>
      <member><literal>"LONG"</literal></member>
      <member><literal>"LONG RAW"</literal></member>
      <member><literal>"ROWID"</literal></member>
      <member><literal>"DATE"</literal></member>
      <member><literal>"CURSOR"</literal></member>
     </simplelist></para>
   </refsect1>
  </refentry>


  <refentry id="function.ora-commit">
   <refnamediv>
    <refname>Ora_Commit</refname>
    <refpurpose>realiza una transacción Oracle</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_commit</function></funcdef>
     <paramdef>int <parameter>conn</parameter></paramdef>
    </funcsynopsis>
    <para>Devuelve verdadero si es exitosa, de lo cantrario devuelve falso.  Puede verse los detalles
    del error usando las funciones <function>ora_error</function>
    y <function>ora_errorcode</function>.  Esta función realiza una transacción Oracle.
    Se define como transacción cualquier cambio en una conexión dada, desde la última
    tarea/retroceso en la ejecucion (rollback), anulación de la ejecución automática de tareas (autocommit), o cuando se ha
    establecido la conexión.</para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-commitoff">
   <refnamediv>
    <refname>Ora_CommitOff</refname>
    <refpurpose>deshabilita el modo automatico de ejecucion de tareas (autocommit)</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_commitoff</function></funcdef>
     <paramdef>int <parameter>conn</parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve verdadero si se ejecuta con éxito, sino devuelve falso.  Los pormenores del error
     en cuestion, pueden revisarse invocando las funciones <function>ora_error</function> y
     <function>ora_errorcode</function>.</para>

    <para>
     Esta función deshabilita la ejecucion automatica luego de cada instancia <function>ora_exec</function>.</para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-commiton">
   <refnamediv>
    <refname>Ora_CommitOn</refname>
    <refpurpose>Habilita la ejecucion automática de tareas (autocommit)</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_commiton</function></funcdef>
     <paramdef>int <parameter>conn</parameter></paramdef>
    </funcsynopsis>
    <para>
     Esta función habilita la ejecucion automatica luego de cada instancia <function>ora_exec</function>
     en la conexión dada.</para>

    <para>
     Devuelve verdadero si se ejecuta con éxito, sino devuelve falso.  Los pormenores del error
     en cuestion, pueden revisarse invocando las funciones <function>ora_error</function> y
     <function>ora_errorcode</function>.</para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-error">
   <refnamediv>
    <refname>Ora_Error</refname>
    <refpurpose>toma los mensajes de error de Oracle</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>string <function>Ora_Error</function></funcdef>
     <paramdef>int <parameter>cursor_or_connection</parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve los mensajes de error en la forma
     <replaceable>XXX</replaceable>-<replaceable>NNNNN</replaceable>
     donde <replaceable>XXX</replaceable> es la procedencia del error
      y <replaceable>NNNNN</replaceable> es la identificación del
     mensaje de error.
    <note>
     <para>El soporte para las identificaciones de conexión fue agregado en la versión 3.0.4.</para>
    </note></para>
    <para>
     En las versiones UNIX de Oracle, pueden encontrarse detalles acerca de un mensaje de error
     como este: <computeroutput>
<prompt>$</prompt> <userinput>oerr ora <replaceable>00001</replaceable></userinput> 00001, 00000,
"unique constraint (%s.%s) violated" // *Cause: An update or insert
statement attempted to insert a duplicate key //         For Trusted
ORACLE configured in DBMS MAC mode, you may see //         this message
if a duplicate entry exists at a different level.  // *Action: Either
remove the unique restriction or do not insert the key </computeroutput></para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-errorcode">
   <refnamediv>
    <refname>Ora_ErrorCode</refname>
    <refpurpose>captura el código de error Oracle</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>Ora_ErrorCode</function></funcdef>
     <paramdef>int <parameter>cursor_or_connection</parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve el codigo numérico de error de la última declaración ejecutada en el cursor
     o conexion espacificada.
     <comment>FIXME: se listarán los valores posibles?</comment>
    <note>
     <para>El soporte para las identificaciones de conexión fue agregado en la versión 3.0.4.</para>
    </note></para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-exec">
   <refnamediv>
    <refname>Ora_Exec</refname>
    <refpurpose>ejecuta las declaraciones interpretadas en un cursor Oracle</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_exec</function></funcdef>
     <paramdef>int <parameter>cursor</parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve verdadero ante la ejecución exitosa, de lo contrario, devuelve falso.  Los detalles del error
     pueden verse invocando las funciones <function>ora_error</function> y
     <function>ora_errorcode</function>.</para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-fetch">
   <refnamediv>
    <refname>Ora_Fetch</refname>
    <refpurpose>extrae una fila de datos a partir de un cursor</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_fetch</function></funcdef>
     <paramdef>int <parameter>cursor</parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve verdadero (se extrajo una fila) o falso (no hay mas filas, o ha
     ocurrido un error).  Si ocurre un error, los detalles del mismo
     pueden verse invocando las funciones <function>ora_error</function> y
     <function>ora_errorcode</function>.  Si no hubo errores,
     <function>ora_errorcode</function> devolverá 0.
     Recupera una hilera de datos partiendo de un cursor especificado.</para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-getcolumn">
   <refnamediv>
    <refname>Ora_GetColumn</refname>
    <refpurpose>toma datos de la fila extraída</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>mixed <function>ora_getcolumn</function></funcdef>
     <paramdef>int <parameter>cursor</parameter></paramdef>
     <paramdef>mixed <parameter>column</parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve la columna de datos.  Si hay un error, se devuelve falso y
     <function>ora_errorcode</function>
     devulve un valor distinto de cero.  Note, de igual manera, que la busqueda
     de un resultado Falso en esta función, puede resultar verdadera, aún en casos
     en que no ocurran errores:(resultado NULO, cadenas vacias, valor 0 o cadenas "0").
     Extrae los datos para una columna o resultado de función.</para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-logoff">
   <refnamediv>
    <refname>Ora_Logoff</refname>
    <refpurpose>cierra una conexión Oracle</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_logoff</function></funcdef>
     <paramdef>int <parameter>connection</parameter></paramdef>
    </funcsynopsis>
    <para>
     Devuelve verdadero si es exitosa, o falso si hay errores.  Los detalles del error
     pueden verse invocando las funciones <function>ora_error</function> y
     <function>ora_errorcode</function>. Cierra la sesión de trabajo del usuario, y lo desconecta del servidor.</para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-logon">
   <refnamediv>
    <refname>Ora_Logon</refname>
    <refpurpose>Abre una conexión Oracle </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_logon</function></funcdef>
     <paramdef>string <parameter>usuario</parameter></paramdef>
     <paramdef>string <parameter>contraseña</parameter></paramdef>
    </funcsynopsis>
    <para>
     Establece una conexión entre PHP y una base de datos Oracle, con los
     datos de nombre de usuario y contraseña especificados.</para>

    <para>
     Las conexiones pueden llevarse adelante usando <productname>SQL*Net</productname>
     indicando el nombre <acronym>TNS</acronym> al
     <parameter>usuario</parameter> de este modo:
     <informalexample>
      <programlisting role="php">
$conn = Ora_Logon("usuario<emphasis>@TNSNAME</emphasis>", "contraseña");
</programlisting>
     </informalexample></para>

    <para>
     Si hubiesen datos con caracteres no-ASCII, habría que asegurarse de que
     esté presente la variable de entorno <envar>NLS_LANG</envar> en el sistema.
     Para los modulos de servidor, deberían definirse en el entorno del servidor antes de iniciarlo.</para>

    <para>
     Devuelve el índice de la conexión si aquella tuvo éxito, de lo cantrario devuelve falso.
     Los detalles del error pueden verse invocando las funciones <function>ora_error</function> y
     <function>ora_errorcode</function>.
    </para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-open">
   <refnamediv>
    <refname>Ora_Open</refname>
    <refpurpose>abre un cursor Oracle</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_open</function></funcdef>
     <paramdef>int <parameter>connection</parameter></paramdef>
    </funcsynopsis>
    <para>
     Abre un cursor asociado con la conexión.</para>

    <para>
     Devuelve el índice del cursor o Falso si hay un error.
     Los detalles del error pueden verse invocando las funciones <function>ora_error</function> y
     <function>ora_errorcode</function>.
    </para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-parse">
   <refnamediv>
    <refname>Ora_Parse</refname>
    <refpurpose>interpreta una declaración SQL</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_parse</function></funcdef>
     <paramdef>int <parameter>cursor_ind</parameter></paramdef>
     <paramdef>string <parameter>sql_statement</parameter></paramdef>
     <paramdef>int <parameter>defer</parameter></paramdef>
    </funcsynopsis>
    <para>
     Esta función interpreta una declaración SQL o un bloque PL/SQL y
     los asocia con el cursor dado.  Devuelve 0 si se ejecuta con exito, o  -1 ante un
     error.</para>

   </refsect1>
  </refentry>


  <refentry id="function.ora-rollback">
   <refnamediv>
    <refname>Ora_Rollback</refname>
    <refpurpose>retrocede en la lista de transacciones (hace un roll back)</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descripción</title>
    <funcsynopsis>
     <funcdef>int <function>ora_rollback</function></funcdef>
     <paramdef>int <parameter>connection</parameter></paramdef>
    </funcsynopsis>
    <para>
     Deshace una transaccion Oracle.  (Ver
     <function>ora_commit</function> para la definición de transacción.)</para>

    <para>
     Devuelve verdadero si tiene éxito, o falso si hay un error.
     Los detalles del error pueden verse invocando las funciones <function>ora_error</function> y
     <function>ora_errorcode</function>.
    </para>

   </refsect1>
  </refentry>


 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
