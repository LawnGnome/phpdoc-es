<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.1 $ -->
<!-- EN-Revision: 1.5 Maintainer: rafael Status: ready -->

<sect1 id="install.iis">
 <title>Servidores-IIS/PWS</title>
 <para>
  Esta secci&oacute;n contiene informaci&oacute;n espec&iacute;fica
  sobre la instalaci&oacute;n de <literal>PHP</literal> con IIS
  (Microsoft Internet Information Server), versiones <link
   linkend="install.iis.iis3">PWS/IIS 3</link>, <link
   linkend="install.iis.pws4">PWS 4 &oacute; posterior</link> y <link
   linkend="install.iis.iis4">IIS 4 &oacute; posterior</link>
 </para>
 
   <note>
  <title>Importante para usuarios de la versi&oacute;n CGI</title>
  <para>
   Leer la <link linkend="faq.installation.forceredirect">faq sobre
    cgi.force_redirect</link> para m&aacute;s detalles. Esta
   directiva debe de tener el valor <literal>0</literal>.
  </para>
 </note>
 
 <sect2 id="install.iis.iis3">
  <title>Windows y PWS/IIS 3</title>
  
  <simpara>
   El m&eacute;todo recomendado para configurar estos servidores es
   usar el archivo REG inclu&iacute;do con la distribuci&oacute;n
   (pws-php4cgi.reg).  Quiz&aacute;s desee editar este archivo y
   asegurarse que las extensiones y directorios de instalaci&oacute;n
   se ajustan a su configuraci&oacute;n. O puede seguir los pasos que
   siguen para hacerlo de forma manual.
  </simpara>
  <warning>
   <para>
    Estos pasos conllevan el trabajar directamente con el registro de
    windows. Un error aqu&iacute; puede dejar su sistema en un estado
    inestable. Le recomendamos encarecidamente que haga una copia de
    seguridad del registro con antelaci&oacute;n. El equipo de
    Desarrollo del PHP no se har&aacute; responsable si se
    da&ntilde;a su registro.
   </para>
  </warning>
  
  <para>
   <itemizedlist>
    <listitem>
     <simpara>
      Ejecute Regedit.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Navegue hasta: <literal>HKEY_LOCAL_MACHINE /System
       /CurrentControlSet /Services /W3Svc /Parameters
       /ScriptMap</literal>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      En el men&uacute; de edici&oacute;n elija: <literal>New->String
       Value</literal>.
     </simpara>
      </listitem>
    <listitem>
     <simpara>
      Escriba la extensi&oacute;n que desea usar para sus script
      PHP. P.ej.: <literal>.php</literal>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Haga una doble pulsaci&oacute;n con el rat&oacute;n en el nuevo valor de
      cadena y escriba la localizaci&oacute;n de <literal>php.exe</literal>
      en el campo del valor.  P.ej.:
      <literal>c:\php\php.exe</literal>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Repita estos pasos para cada extensi&oacute;n que desee asociar
      con los scripts PHP.
     </simpara>
    </listitem>
   </itemizedlist>
  </para>
  <para>
   Los pasos siguientes no afectan a la instalaci&oacute;n del servidor web y
   solamente sirven si quereis ejecutar vuestros scripts en PHP desde
   la linea de comandos (p.ej:
   <filename>c:\myscripts\test.php</filename>) &oacute; haciendo una
   pulsaci&oacute;n doble con el rat&oacute;n desde una ventana del visualizador de
   directorios. Podeis saltaros estos pasos si quereis que los
   ficheros en PHP se abran en un editor cuando hagais una doble
   pulsaci&oacute;n sobre ellos.
  </para>
    <para>
   <itemizedlist>
    <listitem>
     <simpara>
      Navegue hasta: <literal>HKEY_CLASSES_ROOT</literal>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      En el men&uacute; de edici&oacute;n elija:
      <literal>New->Key</literal>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      D&eacute;le a la clave el nombre de la extensi&oacute;n que
      prepar&oacute; en la secci&oacute;n anterior. P.ej.:
      <literal>.php</literal>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Marque la nueva clave y en el panel del lado derecho haga una
      doble pulsaci&oacute;n en "default value" y escriba
      <literal>phpfile</literal>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Repita el &uacute;ltimo paso para cada extensi&oacute;n que
      haya preparado en la secci&oacute;n previa.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Ahora cree otra <literal>New->Key</literal> bajo
      <literal>HKEY_CLASSES_ROOT</literal> y denom&iacute;nela
      <literal>phpfile</literal>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Marque la nueva clave <literal>phpfile</literal>, haga una
      doble pulsaci&oacute;n en el panel derecho sobre "default value" y
      escriba <literal>PHP Script</literal>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Pulse el bot&oacute;n derecho sobre la clave
      <literal>phpfile</literal>, seleccione
      <literal>New->Key</literal> y ll&aacute;mela
      <literal>Shell</literal>.
     </simpara>
      </listitem>
    <listitem>
     <simpara>
      Pulse el bot&oacute;n derecho sobre la clave
      <literal>Shell</literal> ,elija <literal>New->Key</literal> y
      ll&aacute;mela <literal>open</literal>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Pulse el bot&oacute;n derecho sobre la clave
      <literal>open</literal> y elija <literal>New->Key</literal> y
      ll&aacute;mela <literal>command</literal>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Marque la nueva clave <literal>command</literal> y en el panel
      derecho haga una doble pulsaci&oacute;n sobre "default value" y escriba
      la localizaci&oacute;n de <literal>php.exe</literal>. P.ej.:
      <literal>c:\php\php.exe -q %1</literal>. (no olvide el
      <literal>%1</literal>).
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Salga de Regedit.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Si est&aacute; usando PWS en Windows, tendra que arrancar la maquina de
      nuevo para que se carge el registro.
     </simpara>
    </listitem>
   </itemizedlist>
  </para>
  <simpara>
     Los usuarios de PWS e IIS3 tienen ahora un sistema completamente
     operativo. Los usuarios del IIS3 tambi&eacute;n pueden usar una
     curiosa <ulink url="&url.iiscfg;">herramienta</ulink> de Steven
     Genusa para configurar sus mapeados de script.
  </simpara>
  
 </sect2>
 
 <sect2 id="install.iis.pws4">
  <title>Windows y PWS 4 &oacute; posterior</title>
  
  <simpara>
   Existen dos opciones para instalar PHP en Windows con PWS 4 &oacute;
   posterior. Una es el binario CGI de PHP y la otra el m&oacute;dulo DLL
   ISAPI.
  </simpara>
  
  <para>
   Si elegis el binario CGI, teneis que hacer lo siguiente:
   <itemizedlist>
    <listitem>
     <simpara>
      Editar el fichero que se incluye con PHP llamado
      <filename>pws-php4cgi.reg</filename> (mirar en el directorio
      SAPI) para actualizarlo con la localizaci&oacute;n de vuestro
      <filename>php.exe</filename>. Las barras invertidas tienen que
      escaparse, p.ej:
      <literal>[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\w3svc\parameters\Script
       Map] ".php"="c:\\php\\php.exe"</literal>. A continuaci&oacute;n incluir
      este registro en vuestro sistema; podeis hacer esto haciendo una
      doble pulsaci&oacute;n sobre el mismo, con el rat&oacute;n.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      En el administrador de PWS, hacer una doble pulsaci&oacute;n con el
      bot&oacute;n derecho del rat&oacute;n, sobre el directorio donde quereis
      a&ntilde;adir soporte para PHP, seleccionar "Properties", elegir
      "Execute" y confirmar.
     </simpara>
    </listitem>
   </itemizedlist>
  </para>
  
  <para>
   Si elegis el m&oacute;dulo ISAPI, teneis que hacer lo siguiente:
   <itemizedlist>
    <listitem>
     <simpara>
      Editar el fichero que se incluye con PHP llamado
      <filename>pws-php4isapi.reg</filename> (mirar en el directorio
      SAPI) para actualizarlo con la localizaci&oacute;n de vuestro
      <filename>php4isapi.dll</filename>. Las barras invertidas tienen
      que escaparse, p.ej:
      <literal>[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\w3svc\parameters\Script
       Map] ".php"="c:\\php\\sapi\\php4isapi.dll"</literal>. A
      continuaci&oacute;n incluir este registro en vuestro sistema; podeis
      hacer esto haciendo una doble pulsaci&oacute;n sobre el mismo, con el
      rat&oacute;n.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      En el administrador de PWS, hacer una pulsaci&oacute;n con el bot&oacute;n
      derecho del rat&oacute;n, sobre el directorio donde quereis
      a&ntilde;adir soporte para PHP, seleccionar "Properties", elegir
      "Execute" y confirmar.
     </simpara>
    </listitem>
   </itemizedlist>
  </para>
  
 </sect2>
 
 <sect2 id="install.iis.iis4">
  <title>Windows NT/2000/XP y IIS 4 &oacute; posterior</title>

  <simpara>
   Para instalar PHP en un servidor NT/2000/XP con IIS 4 &oacute; posterior,
   teneis que seguir estas instrucciones.  Existen dos opciones para
   instalar PHP, una es el binario CGI de PHP (php.exe) y la otra el
   m&oacute;dulo ISAPI.
  </simpara>
  
  <simpara>
   En ambos casos necesitais arrancar la "consola de administraci&oacute;n de
   Microsoft" (Puede encontrarse como 'Administrador de servicios
   Internet", bien en vuestro "Windows NT 4.0 Option Pack" &oacute; en el
   Control Panel=&gt;Herramientas de administraci&oacute;n bajo Windows
   2000/XP). Hacer una pulsaci&oacute;n con el bot&oacute;n derecho del rat&oacute;n en el
   nodo perteneciente a vuestro servidor web (probablemente aparezca
   como "Servidor web por defecto") y seleccionar "Propiedades".
  </simpara>
  
  <para>
   Si elegis el binario CGI, teneis que hacer lo siguiente:
   <itemizedlist>
    <listitem>
     <simpara>
      Bajo "Carpeta Inicial", "Directorio Virtual" &oacute; "Directorio",
      pulsar en el bot&oacute;n "Configuraci&oacute;n" y entrar en la pesta&ntilde;a
      "Mapas de aplicaciones".
     </simpara>
    </listitem>
    <listitem>
     <simpara>
       Pulse en ""A&ntilde;adir", y en la caja Programa, escriba:
       <literal>c:\php\php.exe</literal> (suponemos que habeis
       descomprimido PHP en c:\php\).
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      En la caja Extensi&oacute;n, escriba la extensi&oacute;n de
      fichero que desea asociar a los script de PHP. Dejar
      "Exclusiones de m&eacute;todo" vacio y elegir "Motor de
      scripts". Tambien podeis elegir "comprobar que el fichero
      existe" - por una peque&ntilde;a perdida en el rendimiento, IIS
      (&oacute; PWS) comprobar&aacute; que el script existe antes de usar php. Esto
      significa que obtendremos errores del tipo 404 en vez de errores
      cgi diciendo que php no devolvio ning&uacute;n dato.
     </simpara>
     <simpara>
      Debereis de repetir el paso anterior por cada extensi&oacute;n que
      querais asociar con PHP.  <literal>.php</literal> y
      <literal>.phtml</literal> son valores comunes, aunque
      <literal>.php3</literal> puede que sea necesaria para ejecutar
      scripts antiguos.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Ajuste la seguridad apropiada (esto se realiza en el
      Administrador de Servicio de Internet) y si su NT Server usa
      el sistema de archivos NTFS, a&ntilde;ada derechos de
      ejecuci&oacute;n para I_USR_ en el directorio que contenga el
      <literal>php.exe</literal>.
     </simpara>
    </listitem>
   </itemizedlist>
  </para>
  
  <para>
    Si elegis el m&oacute;dulo ISAPI, teneis que hacer lo siguiente:
   <itemizedlist>
    <listitem>
     <simpara>
      Si no quereis utilizar Autentificaci&oacute;n HTTP usando PHP, podeis
      (y debeis) de saltaros este paso. Bajo "Filtros ISAPI",
      a&ntilde;adir un nuevo filtro ISAPI. Usar PHP como nombre del
      filtro y definir la localizaci&oacute;n del fichero php4isapi.dll.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Bajo "Carpeta Inicial" pulsar en el bot&oacute;n "Configuraci&oacute;n" y
      a&ntilde;adir un nuevo valor en "Mapas de aplicaciones". Definir
      la localizaci&oacute;n del fichero php4isapi.dll como ejecutable y
      <literal>.php</literal> como la extensi&oacute;n.  Dejar "Exclusiones
      de m&eacute;todo" vacio y elegir "Motor de scripts"
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Parar IIS completamente (NET STOP iisadmin)
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Arrancar IIS de nuevo (NET START w3svc)
     </simpara>
    </listitem>
   </itemizedlist>
  </para>
 </sect2>
  </sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
