<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.12 $ -->
<!-- EN-Revision: 1.27 Maintainer: rafael Status: ready -->

 <chapter xml:id="features.remote-files" xmlns="http://docbook.org/ns/docbook">
  <title>Usando archivos remotos</title>

  <para>
   Siempre que <option>allow_url_fopen</option> est&eacute; habilitado
   en &php.ini;, se pueden usar URLs <acronym>HTTP</acronym> y
   <acronym>FTP</acronym> con la mayor&iacute;a de las funciones que
   toman un archivo como par&aacute;metro. Adem&aacute;s URLs pueden
   ser usadas con <function>include</function>,
   <function>include_once</function>, <function>require</function> y
   <function>require_once</function>. Consultar <xref
   linkend="wrappers"/> para m&aacute;s informaci&oacute;n sobre los
   protocolos soportados por PHP.
 </para>
 <note>
   <para>
   En PHP 4.0.3 y versiones anteriores, para usar envolturas URL,
   habia que configurar PHP usando la opci&oacute;n de
   configuraci&oacute;n <option>--enable-url-fopen-wrapper</option>.
   </para>
  </note>
 <para>
  <note>
   <para>
    Las versiones para windows de PHP anteriores a PHP 4.3 no
    soportaban acceso remoto a ficheros en las funciones siguientes:
    <function>include</function>, <function>include_once</function>,
    <function>require</function>, <function>require_once</function>, y
    las funciones imagecreatefromXXX de la extensi&oacute;n <xref
    linkend="ref.image"/>.
   </para>
  </note>
 </para>
 <para>
  Por ejemplo, se puede usar este para abrir un archivo en un servidor
   web remoto, analizar en la salida la informaci&oacute;n que se quiera, 
   y entonces, usar la informaci&oacute;n en una consulta a base de
   datos, o simplemente para sacarlas en un estilo que coincida con el
   resto de su sitio web.
  </para>

  <para>
   <example>
    <title>Obtener el t&iacute;tulo de una p&aacute;gina remota</title>
  <programlisting role="php">
<![CDATA[
<?php
$file = fopen ("http://www.example.com/", "r");
if (!$file) {
    echo "<p>Unable to open remote file.\n";
    exit;
}
while (!feof ($file)) {
    $line = fgets ($file, 1024);
    /* This only works if the title and its tags are on one line */
    if (eregi ("<title>(.*)</title>", $line, $out)) {
        $title = $out[1];
        break;
    }
}
fclose($file);
?>
]]>
    </programlisting>
   </example>
  </para>
  <para>
   Tambi&eacute;n se puede escribir a archivos en un servidor FTP
   (siempre que se conecte como un usuario con los correctos derechos
   de acceso).  Solamente se pueden crear nuevos ficheros usando este
   m&eacute;todo; si se intenta sobreescribir un fichero ya existente,
   la funci&oacute;n <function>fopen</function> fallar&aacute;
 </para>
 <para>
  Para conectar como un usuario distinto de 'anonymous', se necesita
  especificar el nombre de usuario (y posiblemente contrase&ntilde;a)
  dentro de la URL, tales como
  'ftp://usuario:clave@ftp.example.com/ruta/hacia/archivo'. (Se puede
  usar la misma clase de sintaxis para acceder a archivos via HTTP
  cuando se requer&iacute;a una autenticaci&oacute; de same sort of
  syntax to access files via HTTP when they require Basic
  authentication.)
 </para>
 <para>
  <example>
   <title>Almacenando datos en un servidor remoto</title>
   <programlisting role="php">
<![CDATA[
<?php
$file = fopen ("ftp://ftp.example.com/incoming/outputfile", "w");
if (!$file) {
    echo "<p>Unable to open remote file for writing.\n";
    exit;
}
/* Write the data here. */
fwrite ($file, $_SERVER['HTTP_USER_AGENT'] . "\n");
fclose ($file);
?>
]]>  
   </programlisting>
  </example>
 </para>
 <para>
  <note>
   <para>
    Podeis creer por el ejemplo anterior, que podeis usar esta tecnica
    para escribir en un fichero de registro remoto. Desgraciadamente
    no funcionaria porque la llamada <function>fopen</function>
    fallaria si el fichero remoto existe. Para usar registros
    distribuidos de esa manera podeis consultar la funcion
    <function>syslog</function>.  </para>
  </note>
 </para>
 
 </chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
